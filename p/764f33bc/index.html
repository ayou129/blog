<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Webpack · 阿尤</title><meta name="description" content="Webpack - 阿尤"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/blog/index.ico"><link rel="stylesheet" href="/blog/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://ayou129.github.io/blog/atom.xml" title="阿尤"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/blog/atom.xml" title="阿尤" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/blog/" class="logo-link"><img src="/blog/index.ico" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/blog/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/blog/archives/" target="_self" class="nav-list-link">历史文章</a></li><li class="nav-list-item"><a href="/blog/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><!--mixin postList()--><!--    .archive--><!--        - var year = 0;--><!--        - var change = false;--><!--        - page.posts.each(function (item) {--><!--            - var itemYear = date(item.date, 'YYYY') - 0;--><!--            - change = year !== itemYear;--><!--            - year = change ? itemYear : year;--><!--            if change--><!--                h2.archive-year!= year--><!--            .post-item--><!--                +postInfo(item)--><!--                a.post-title-link(href= url_for(item.path))--><!--                    != item.title--><!--        - })--><div class="post"><article class="post-block"><h1 class="post-title">Webpack</h1><div class="post-info">创建于：2019年7月26日<span style="margin-left: 0.5rem"></span>上次更新：2021年5月26日</div><div class="post-content"><h1 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h1><h2 id="VueRoute"><a href="#VueRoute" class="headerlink" title="VueRoute"></a>VueRoute</h2><ul>
<li><p>问题一：导入route&#x2F;index.js时<br>使用import router from ‘.&#x2F;route’</p>
</li>
<li><p>问题二：new Router配置 mode:’history’时，手动输入url会404<br>npm i -g <a href="mailto:&#119;&#101;&#x62;&#112;&#x61;&#99;&#x6b;&#x40;&#52;&#x2e;&#x33;&#48;&#46;&#x30;">&#119;&#101;&#x62;&#112;&#x61;&#99;&#x6b;&#x40;&#52;&#x2e;&#x33;&#48;&#46;&#x30;</a> <a href="mailto:&#119;&#101;&#x62;&#112;&#97;&#99;&#107;&#45;&#99;&#108;&#105;&#x40;&#51;&#46;&#51;&#x2e;&#x30;">&#119;&#101;&#x62;&#112;&#97;&#99;&#107;&#45;&#99;&#108;&#105;&#x40;&#51;&#46;&#51;&#x2e;&#x30;</a> webpack-dev-server <a href="mailto:&#104;&#x74;&#x6d;&#x6c;&#x2d;&#x77;&#x65;&#x62;&#x70;&#97;&#x63;&#x6b;&#45;&#112;&#108;&#117;&#x67;&#x69;&#x6e;&#x40;&#x33;&#x2e;&#x32;&#46;&#48;">&#104;&#x74;&#x6d;&#x6c;&#x2d;&#x77;&#x65;&#x62;&#x70;&#97;&#x63;&#x6b;&#45;&#112;&#108;&#117;&#x67;&#x69;&#x6e;&#x40;&#x33;&#x2e;&#x32;&#46;&#48;</a><br>需要在webpack.config.js 中 devServer 添加&gt; historyApiFallback: true,</p>
</li>
</ul>
<h2 id="安装eslint，多人协作规范"><a href="#安装eslint，多人协作规范" class="headerlink" title="安装eslint，多人协作规范"></a>安装eslint，多人协作规范</h2><blockquote>
<p><a href="https://vue-loader.vuejs.org/zh/guide/linting.html" target="_blank" rel="noopener">https://vue-loader.vuejs.org/zh/guide/linting.html</a></p>
</blockquote>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装库</span></span><br><span class="line">npm <span class="keyword">install </span>-D eslint eslint-<span class="built_in">config</span>-standard eslint-plugin-standard eslint-plugin-node eslint-plugin-promise eslint-plugin-import eslint-plugin-html eslint-loader <span class="keyword">babel-eslint </span>eslint-plugin-vue</span><br><span class="line"></span><br><span class="line"><span class="comment">##创建配置文件</span></span><br><span class="line">.eslintrc&#123;</span><br><span class="line">	<span class="string">&quot;extends&quot;</span>: [</span><br><span class="line">		<span class="string">&quot;plugin:vue/essential&quot;</span>,</span><br><span class="line">		<span class="string">&quot;standard&quot;</span></span><br><span class="line">	],</span><br><span class="line">	<span class="string">&quot;plugins&quot;</span>: [</span><br><span class="line">		<span class="string">&quot;vue&quot;</span></span><br><span class="line">	],</span><br><span class="line">	<span class="string">&quot;parserOptions&quot;</span>: &#123;</span><br><span class="line">		<span class="string">&quot;parser&quot;</span>: <span class="string">&quot;babel-eslint&quot;</span>,</span><br><span class="line">		<span class="string">&quot;ecmaVersion&quot;</span>: <span class="number">2017</span>,</span><br><span class="line">		<span class="string">&quot;sourceType&quot;</span>: <span class="string">&quot;module&quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">##package.json</span></span><br><span class="line"><span class="keyword">scripts&#123;</span></span><br><span class="line"><span class="keyword"></span>	<span class="string">&quot;lint&quot;</span>: <span class="string">&quot;eslint --ext js,jsx,vue client/&quot;</span>,</span><br><span class="line">	<span class="string">&quot;lint-fix&quot;</span>: <span class="string">&quot;eslint --fix --ext js,jsx,vue client/&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="git-commit时检测并阻止错误代码"><a href="#git-commit时检测并阻止错误代码" class="headerlink" title="git commit时检测并阻止错误代码"></a>git commit时检测并阻止错误代码</h2><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装库</span></span><br><span class="line"><span class="built_in">npm</span> i -D husky</span><br><span class="line"></span><br><span class="line"><span class="comment">#package.json</span></span><br><span class="line">scripts&#123;</span><br><span class="line">    <span class="string">&quot;precommit&quot;</span>: <span class="string">&quot;npm run lint&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="正式环境打包优化"><a href="#正式环境打包优化" class="headerlink" title="正式环境打包优化"></a>正式环境打包优化</h2><h3 id="将css内容单独分离出来-mini-css-extract-plugin"><a href="#将css内容单独分离出来-mini-css-extract-plugin" class="headerlink" title="将css内容单独分离出来 mini-css-extract-plugin"></a>将css内容单独分离出来 mini-css-extract-plugin</h3><blockquote>
<p><a href="https://www.npmjs.com/package/mini-css-extract-plugin" target="_blank" rel="noopener">https://www.npmjs.com/package/mini-css-extract-plugin</a></p>
</blockquote>
<figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#安装库</span><br><span class="line">npm i -D mini-css-extract-plugin</span><br><span class="line"></span><br><span class="line">#webpack.config.js</span><br><span class="line">##(<span class="number">1</span>)</span><br><span class="line">const MiniCssExtractPlugin = require(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>)</span><br><span class="line">##(<span class="number">2</span>)</span><br><span class="line">plugins: [</span><br><span class="line">	new MiniCssExtractPlugin(&#123;</span><br><span class="line">	  <span class="comment">// Options similar to the same options in webpackOptions.output</span></span><br><span class="line">	  <span class="comment">// both options are optional</span></span><br><span class="line">	  filename: <span class="string">&#x27;[name].css&#x27;</span>,</span><br><span class="line">	  chunkFilename: <span class="string">&#x27;[id].css&#x27;</span></span><br><span class="line">	&#125;)</span><br><span class="line">]</span><br><span class="line">##(<span class="number">3</span>)</span><br><span class="line">rules: [</span><br><span class="line">  &#123;</span><br><span class="line">	test: /\.css$/,</span><br><span class="line">	use: [</span><br><span class="line">	  &#123;</span><br><span class="line">		loader: MiniCssExtractPlugin.loader,</span><br><span class="line">		options: &#123;</span><br><span class="line">		  <span class="comment">// you can specify a publicPath here</span></span><br><span class="line">		  <span class="comment">// by default it use publicPath in webpackOptions.output</span></span><br><span class="line">		  publicPath: <span class="string">&#x27;../&#x27;</span></span><br><span class="line">		&#125;</span><br><span class="line">	  &#125;,</span><br><span class="line">	  <span class="string">&#x27;css-loader&#x27;</span></span><br><span class="line">	]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h3 id="build之前删除之前生成的所有build过的文件-clean-webpack-plugin"><a href="#build之前删除之前生成的所有build过的文件-clean-webpack-plugin" class="headerlink" title="build之前删除之前生成的所有build过的文件 clean-webpack-plugin"></a>build之前删除之前生成的所有build过的文件 clean-webpack-plugin</h3><blockquote>
<p><a href="https://www.npmjs.com/package/clean-webpack-plugin" target="_blank" rel="noopener">https://www.npmjs.com/package/clean-webpack-plugin</a></p>
</blockquote>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装库</span></span><br><span class="line"><span class="built_in">npm</span> i -D clean-webpack-plugin</span><br><span class="line"></span><br><span class="line"><span class="comment">#webpack.config.js</span></span><br><span class="line"><span class="comment">##(1)</span></span><br><span class="line"><span class="keyword">const</span> CleanWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="comment">##(2)</span></span><br><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(&#123;</span><br><span class="line">        dry: <span class="literal">true</span>,</span><br><span class="line">        verbose: <span class="literal">true</span>,</span><br><span class="line">        cleanOnceBeforeBuildPatterns: [<span class="string">&#x27;!build/*&#x27;</span>]<span class="regexp">//排除该文件夹</span></span><br><span class="line"><span class="regexp">    &#125;),</span></span><br><span class="line"><span class="regexp">]</span></span><br></pre></td></tr></table></figure>

<h3 id="将图片文件转换为base64编码并载入浏览器能够减少http请求数，但是增大了js或html文件的体积-url-loader"><a href="#将图片文件转换为base64编码并载入浏览器能够减少http请求数，但是增大了js或html文件的体积-url-loader" class="headerlink" title="将图片文件转换为base64编码并载入浏览器能够减少http请求数，但是增大了js或html文件的体积 url-loader"></a>将图片文件转换为base64编码并载入浏览器能够减少http请求数，但是增大了js或html文件的体积 url-loader</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装库</span></span><br><span class="line"><span class="string">npm</span> <span class="string">install</span> <span class="string">url-loader</span> <span class="string">--save-dev</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#导入文件</span></span><br><span class="line"><span class="string">import</span> <span class="string">img</span> <span class="string">from</span> <span class="string">&#x27;./image.png&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#webpack.config.js</span></span><br><span class="line"><span class="attr">rules:</span> [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">test:</span> <span class="string">/\.(gif|png|svg|jpg|jpeg)$/</span>,</span><br><span class="line">    <span class="attr">use:</span> [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">loader:</span> <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">        <span class="attr">options:</span> &#123;</span><br><span class="line">          <span class="attr">limit:</span> <span class="number">1024</span>,</span><br><span class="line">          <span class="attr">name:</span> <span class="string">&#x27;[name].[ext]&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="给不同浏览器的样式加上前缀，如-webkit-postcss-loader"><a href="#给不同浏览器的样式加上前缀，如-webkit-postcss-loader" class="headerlink" title="给不同浏览器的样式加上前缀，如-webkit- postcss-loader"></a>给不同浏览器的样式加上前缀，如-webkit- postcss-loader</h3><blockquote>
<p><a href="https://www.npmjs.com/package/postcss-loader" target="_blank" rel="noopener">https://www.npmjs.com/package/postcss-loader</a></p>
</blockquote>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装库</span></span><br><span class="line"><span class="built_in">npm</span> install postcss-loader --save-dev</span><br><span class="line"></span><br><span class="line"><span class="comment">#配置文件.postcssrc.js</span></span><br><span class="line"><span class="keyword">let</span> postcssConfig = &#123;&#125;;</span><br><span class="line">postcssConfig.autoprefixer = &#123;</span><br><span class="line">    browsers: [<span class="string">&#x27;&gt; 1%&#x27;</span>, <span class="string">&#x27;ff 3&#x27;</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.<span class="built_in">exports</span> = &#123;</span><br><span class="line">    plugins: postcssConfig</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#webpack.config.js</span></span><br><span class="line">rules: [</span><br><span class="line">  &#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: [ <span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;postcss-loader&#x27;</span> ]</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="单独打包类库文件"><a href="#单独打包类库文件" class="headerlink" title="单独打包类库文件"></a>单独打包类库文件</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#webpack</span><span class="selector-class">.config</span><span class="selector-class">.js</span></span><br><span class="line">entry:&#123;</span><br><span class="line">    app: <span class="string">&#x27;入口文件&#x27;</span>,</span><br><span class="line">    vendor:<span class="selector-attr">[<span class="string">&#x27;vue&#x27;</span>,<span class="string">&#x27;vue-route&#x27;</span>]</span></span><br><span class="line">&#125;</span><br><span class="line">plugin:&#123;</span><br><span class="line">    new webpack<span class="selector-class">.optimize</span><span class="selector-class">.CommonsChunkPlugin</span>(&#123;</span><br><span class="line">        name: <span class="string">&#x27;vendor&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ElementUI"><a href="#ElementUI" class="headerlink" title="ElementUI"></a>ElementUI</h2><ol>
<li>设置 input textarea 行高 :rows&#x3D;”行数”</li>
<li>el-dropdown-item下使用@click 失效<br> 正确使用方法：@click.native&#x3D;”” 失效</li>
</ol>
</div></article></div></main><footer><div class="paginator"><a href="/blog/p/a17632fe/" class="prev">上一篇</a><a href="/blog/p/f8e09374/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'seansun';
var disqus_identifier = 'p/764f33bc/';
var disqus_title = 'Webpack';
var disqus_url = 'https://ayou129.github.io/blog/p/764f33bc/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//seansun.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2022 <a href="https://ayou129.github.io/blog">阿尤</a>.</p><!--p © #{year} #[a(href=config.url)!= config.author], powered by #[a(href=hexoURL, target="_blank") Hexo] and #[a(href=apolloURL, target="_blank") hexo-theme-apollo].--></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>