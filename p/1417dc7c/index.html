<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> PHP · 阿尤</title><meta name="description" content="PHP - 阿尤"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/blog/index.ico"><link rel="stylesheet" href="/blog/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://ayou129.github.io/blog/atom.xml" title="阿尤"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/blog/atom.xml" title="阿尤" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/blog/" class="logo-link"><img src="/blog/index.ico" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/blog/" target="_self" class="nav-list-link">首页</a></li><li class="nav-list-item"><a href="/blog/archives/" target="_self" class="nav-list-link">历史文章</a></li><li class="nav-list-item"><a href="/blog/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><!--mixin postList()--><!--    .archive--><!--        - var year = 0;--><!--        - var change = false;--><!--        - page.posts.each(function (item) {--><!--            - var itemYear = date(item.date, 'YYYY') - 0;--><!--            - change = year !== itemYear;--><!--            - year = change ? itemYear : year;--><!--            if change--><!--                h2.archive-year!= year--><!--            .post-item--><!--                +postInfo(item)--><!--                a.post-title-link(href= url_for(item.path))--><!--                    != item.title--><!--        - })--><div class="post"><article class="post-block"><h1 class="post-title">PHP</h1><div class="post-info">创建于：2018年7月25日<span style="margin-left: 0.5rem"></span>上次更新：2022年10月1日</div><div class="post-content"><h2 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h2><p>“超文本预处理器”，是在服务器端执行的脚本语言，尤其适用于Web开发并可嵌入HTML中。</p>
<h2 id="各个框架的对比"><a href="#各个框架的对比" class="headerlink" title="各个框架的对比"></a>各个框架的对比</h2><table>
<thead>
<tr>
<th>框架</th>
<th>社区</th>
<th>特点</th>
<th>缺点</th>
<th>其他</th>
</tr>
</thead>
<tbody><tr>
<td>laravel</td>
<td>国内外非常活跃</td>
<td>全能</td>
<td>基于组件式的框架，所以比较臃肿，大部分为英文文档，源码难理解</td>
<td>使用率最高的框架，主流web(vue + laravel)</td>
</tr>
<tr>
<td>yii</td>
<td>不活跃</td>
<td>面向接口、敏捷开发，轻量框架，性能最好</td>
<td>组件非常少，多数为英文文档</td>
<td></td>
</tr>
<tr>
<td>thinkphp</td>
<td>国内最活跃</td>
<td>学习成本更低，易上手</td>
<td>没有很好的设计模式</td>
<td></td>
</tr>
<tr>
<td>Yaf</td>
<td>最不活跃</td>
<td>常驻内存，提高内存利用率</td>
<td>需要重复造轮子，维护成本高</td>
<td></td>
</tr>
<tr>
<td>Swoole</td>
<td>一般</td>
<td>让php不再局限于Web领域</td>
<td>学习成本高，容易造成内存泄漏</td>
<td></td>
</tr>
</tbody></table>
<h2 id="框架的实现方式有哪些不同"><a href="#框架的实现方式有哪些不同" class="headerlink" title="框架的实现方式有哪些不同"></a>框架的实现方式有哪些不同</h2><h2 id="9大数据类型"><a href="#9大数据类型" class="headerlink" title="9大数据类型"></a>9大数据类型</h2><h3 id="标量类型4个"><a href="#标量类型4个" class="headerlink" title="标量类型4个"></a>标量类型4个</h3><ul>
<li>浮点类型(double)</li>
<li>整型</li>
<li>布尔型(true|false)</li>
<li>字符串</li>
</ul>
<h3 id="复合类型3个"><a href="#复合类型3个" class="headerlink" title="复合类型3个"></a>复合类型3个</h3><ul>
<li>数组</li>
<li>对象</li>
<li>可调用类型 <code>call_user_func()</code></li>
</ul>
<h3 id="特殊类型2个"><a href="#特殊类型2个" class="headerlink" title="特殊类型2个"></a>特殊类型2个</h3><ul>
<li>无类型null</li>
<li>资源类型resource</li>
</ul>
<h2 id="语言参考"><a href="#语言参考" class="headerlink" title="语言参考"></a>语言参考</h2><h3 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h3><h4 id="布尔值"><a href="#布尔值" class="headerlink" title="布尔值"></a>布尔值</h4><p>false的7种情况: <code>0</code>, <code>0.0</code>,<code>&quot;0&quot; 或 &#39;0&#39;</code>,<code>&quot;&quot;</code>,<code>false</code>,<code>null</code>,<code>[]</code></p>
<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><h5 id="字符串的四种定义方式和区别"><a href="#字符串的四种定义方式和区别" class="headerlink" title="字符串的四种定义方式和区别"></a>字符串的四种定义方式和区别</h5><h6 id="定义方式"><a href="#定义方式" class="headerlink" title="定义方式"></a>定义方式</h6><ol>
<li>单引号<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$temp</span> = <span class="string">&#x27;a&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
<li>双引号<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$temp</span> = <span class="string">&quot;a&quot;</span>;</span><br></pre></td></tr></table></figure></li>
<li>nowdoc(类似单引号的性质)<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$temp</span> = &lt;&lt;&lt;<span class="string">&#x27;a&#x27;</span>;    </span><br><span class="line">这是内容</span><br><span class="line">a;</span><br></pre></td></tr></table></figure></li>
<li>heredoc(类似双引号的性质)<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$temp</span> = &lt;&lt;&lt;<span class="string">&quot;a&quot;</span>;<span class="comment">//这里可以使用双引号也可以不使用引号 &quot;a&quot;|a</span></span><br><span class="line">这是内容</span><br><span class="line">a;</span><br></pre></td></tr></table></figure></li>
</ol>
<h6 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h6><ul>
<li>单引号 <font color="red"><b>效率</b></font> 高于双引号</li>
<li>单引号<font color="red"><b>不解析</b></font>任何变量，双引号相反</li>
<li>单引号<font color="red"><b>不转义</b></font>除 <code>\</code> 和 <code>&#39;</code> 之外的任何字符，双引号可以转义部分支持的字符串</li>
</ul>
<h4 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h4><h5 id="字符串转换成数字"><a href="#字符串转换成数字" class="headerlink" title="字符串转换成数字"></a>字符串转换成数字</h5><p>科学计数法</p>
<ol>
<li>a×10^b(aEb) E等于e 其中一个因数为a（1≤|a|&lt;10），另一个因数为10^n。</li>
<li><code>-1.3E-2</code> 是 (-1.3) * (10的-2次方)</li>
<li><code>-1.3E2</code> 是 (-1.3) * (10的2次方)</li>
</ol>
<ul>
<li>当一个字符串被当作一个数值来取值</li>
<li>该字符串的开始部分决定了它的值</li>
<li>如果该字符串以合法的数值开始，则使用该数值。否则其值为 0（零）。</li>
<li>包含 ‘.’，’e’ 或 ‘E’ 并且其数字值在整型的范围之内，取 <code>float</code><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$foo</span> = <span class="number">1</span> + <span class="string">&quot;10.5&quot;</span>;                <span class="comment">// $foo is float (11.5)</span></span><br><span class="line"><span class="variable">$foo</span> = <span class="number">1</span> + <span class="string">&quot;-1.3e3&quot;</span>;              <span class="comment">// $foo is float (-1299) ☆☆☆☆☆</span></span><br><span class="line"><span class="variable">$foo</span> = <span class="number">1</span> + <span class="string">&quot;bob-1.3e3&quot;</span>;           <span class="comment">// $foo is integer (1)</span></span><br><span class="line"><span class="variable">$foo</span> = <span class="number">1</span> + <span class="string">&quot;bob3&quot;</span>;                <span class="comment">// $foo is integer (1)</span></span><br><span class="line"><span class="variable">$foo</span> = <span class="number">1</span> + <span class="string">&quot;10 Small Pigs&quot;</span>;       <span class="comment">// $foo is integer (11)</span></span><br><span class="line"><span class="variable">$foo</span> = <span class="number">4</span> + <span class="string">&quot;10.2 Little Piggies&quot;</span>; <span class="comment">// $foo is float (14.2)</span></span><br><span class="line"><span class="variable">$foo</span> = <span class="string">&quot;10.0 pigs &quot;</span> + <span class="number">1</span>;          <span class="comment">// $foo is float (11)</span></span><br><span class="line"><span class="variable">$foo</span> = <span class="string">&quot;10.0 pigs &quot;</span> + <span class="number">1.0</span>;        <span class="comment">// $foo is float (11)     </span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h4><h5 id="循环数组的三种方式"><a href="#循环数组的三种方式" class="headerlink" title="循环数组的三种方式"></a>循环数组的三种方式</h5><ol>
<li>for循环：只能遍历索引数组</li>
<li>foreach循环：可以遍历索引和关联数组</li>
<li>list while each：可以遍历索引和关联数组<blockquote>
<p>php7已经将each废弃</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$a</span> = [<span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;age&#x27;</span> =&gt; <span class="number">22</span>];</span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">list</span>(<span class="variable">$key</span>, <span class="variable">$value</span>) = each(<span class="variable">$a</span>)) &#123;</span><br><span class="line">	<span class="keyword">echo</span> <span class="string">&quot;&lt;dd&gt;<span class="subst">$key</span> : <span class="subst">$value</span>&lt;/dd&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>note:</p>
</li>
</ol>
<ul>
<li>效率最高的是foreach</li>
<li>第三种方法没有重置数组的指针，foreach执行前会重置指针</li>
<li>if优化，<ol>
<li>将大概率的条件放在最前面处理，</li>
<li>条件允许，可以将多个if转换成少量if加上switch语句，因为switch语句效率高</li>
</ol>
</li>
</ul>
<hr>
<h3 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h3><h4 id="定义方式-1"><a href="#定义方式-1" class="headerlink" title="定义方式"></a>定义方式</h4><ol>
<li><code>const</code></li>
<li><code>define</code></li>
</ol>
<ul>
<li>相同点：定义后不可被修改</li>
<li>不同点：const更快，const是定义类的常量</li>
</ul>
<h4 id="预定义常量"><a href="#预定义常量" class="headerlink" title="预定义常量"></a>预定义常量</h4><blockquote>
<p>快速记忆：<code>目录</code>&gt;<code>文件</code>&gt;<code>namespace</code>&gt;<code>类名</code>&gt;<code>类方法名</code>&gt;<code>行</code>，特殊的：<code>方法</code>和<code>TRAIT</code></p>
</blockquote>
<ul>
<li><code>__DIR__</code> 返回文件的所在目录</li>
<li><code>__FILE__</code> 返回该文件的完整路径和文件名</li>
<li><code>__NAMESPACE__</code> 返回本文件的命名空间</li>
<li><code>__CLASS__</code> 返回类的类名</li>
<li><code>__METHOD__</code> 返回类的方法名</li>
<li><code>__LINE__</code> 返回当前代码的行号</li>
<li><code>__FUNCTION__</code> 返回本函数的函数名</li>
<li><code>__TRAIT__</code> 返回Trait名</li>
</ul>
<hr>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><h4 id="引用变量"><a href="#引用变量" class="headerlink" title="引用变量"></a>引用变量</h4><p>特点:</p>
<ol>
<li>unset引用变量只是取消引用，不是销毁内存<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$a</span> = <span class="number">1</span>;</span><br><span class="line"><span class="variable">$b</span> = &amp;<span class="variable">$a</span>;</span><br><span class="line"><span class="keyword">unset</span>(<span class="variable">$b</span>);</span><br></pre></td></tr></table></figure></li>
<li>对象不能被复制，复制后，也就是引用，目标都是指向的该对象<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Users</span></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$name</span> = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> Users;</span><br><span class="line"><span class="variable">$b</span> = <span class="variable">$a</span>;</span><br><span class="line"><span class="variable">$b</span>-&gt;name = <span class="number">1</span>;</span><br><span class="line"><span class="comment">//a也会发生改变</span></span><br></pre></td></tr></table></figure>
题目：<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//每一次循环结束后变量$data的值是什么</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$data</span> = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$data</span> <span class="keyword">as</span> <span class="variable">$key</span> =&gt; <span class="variable">$val</span>) &#123;</span><br><span class="line">	<span class="variable">$val</span> = &amp;<span class="variable">$data</span>[<span class="variable">$key</span>];</span><br><span class="line">    var_dump(<span class="variable">$data</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">核心要点在于 $val 与 $data[&#x27;n&#x27;] 引用之后，当$val发生改变时，$data[&#x27;n&#x27;]也会发生改变</span></span><br><span class="line"><span class="comment">循环体1&#123;</span></span><br><span class="line"><span class="comment">  $val被赋值 a</span></span><br><span class="line"><span class="comment">  $val = &amp;$data[0]; 绑定到一起</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">循环体2&#123;</span></span><br><span class="line"><span class="comment">  $val被赋值 b</span></span><br><span class="line"><span class="comment">  $data[0]变成b</span></span><br><span class="line"><span class="comment">  $val = &amp;$data[1]; 绑定到一起</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">循环体3&#123;</span></span><br><span class="line"><span class="comment">  $val被赋值 c</span></span><br><span class="line"><span class="comment">  $data[0]变成c</span></span><br><span class="line"><span class="comment">  $val = &amp;$data[2]; 绑定到一起</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">答案：</span></span><br><span class="line"><span class="comment">array(3) &#123;</span></span><br><span class="line"><span class="comment">  [0] =&gt;</span></span><br><span class="line"><span class="comment">  string(1) &quot;b&quot;</span></span><br><span class="line"><span class="comment">  [1] =&gt;</span></span><br><span class="line"><span class="comment">  string(1) &quot;c&quot;</span></span><br><span class="line"><span class="comment">  [2] =&gt;</span></span><br><span class="line"><span class="comment">  string(1) &quot;c&quot;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="变量范围"><a href="#变量范围" class="headerlink" title="变量范围"></a>变量范围</h4><h5 id="global关键字-x3D-x3D-GLOBALS-‘XX’"><a href="#global关键字-x3D-x3D-GLOBALS-‘XX’" class="headerlink" title="global关键字 &#x3D;&#x3D; $GLOBALS[‘XX’]"></a>global关键字 &#x3D;&#x3D; $GLOBALS[‘XX’]</h5><h5 id="static"><a href="#static" class="headerlink" title="static"></a>static</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">exec</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$a</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$a</span>;</span><br><span class="line">    <span class="variable">$a</span>++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>特点：</p>
<ol>
<li>只存在于局部作用域中</li>
<li>当程序执行完并且离开作用于时，值不丢失</li>
<li>可用于限制递归次数</li>
</ol>
<p>真题：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$count</span> = <span class="number">5</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_count</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">static</span> <span class="variable">$count</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="variable">$count</span>++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$count</span>;</span><br><span class="line">++<span class="variable">$count</span>;</span><br><span class="line"><span class="keyword">echo</span> get_count();</span><br><span class="line"><span class="keyword">echo</span> get_count();</span><br><span class="line"></span><br><span class="line"><span class="comment">#结果是 5 null 1 但是echo后是51</span></span><br></pre></td></tr></table></figure>

<h4 id="预定义变量"><a href="#预定义变量" class="headerlink" title="预定义变量"></a>预定义变量</h4><h5 id="超全局数组"><a href="#超全局数组" class="headerlink" title="超全局数组"></a>超全局数组</h5><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$GLOBALS</span></span><br><span class="line">    <span class="variable">$_SESSION</span></span><br><span class="line">    <span class="variable">$_ENV</span></span><br><span class="line">    <span class="variable">$_SERVER</span></span><br><span class="line">        <span class="variable">$_SERVER</span>[<span class="string">&#x27;SERVER_ADDR&#x27;</span>]</span><br><span class="line">        <span class="variable">$_SERVER</span>[<span class="string">&#x27;SERVER_NAME&#x27;</span>]</span><br><span class="line">        <span class="variable">$_SERVER</span>[<span class="string">&#x27;REMOTE_ADDR&#x27;</span>]</span><br><span class="line">        <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_REFERER&#x27;</span>]</span><br><span class="line">        <span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_USER_AGENT&#x27;</span>]</span><br><span class="line">        <span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_URL&#x27;</span>]</span><br><span class="line">        <span class="variable">$_SERVER</span>[<span class="string">&#x27;REQUEST_TIME&#x27;</span>]</span><br><span class="line">        <span class="variable">$_SERVER</span>[<span class="string">&#x27;PATH_INFO&#x27;</span>]</span><br><span class="line">    <span class="variable">$_FILES</span></span><br><span class="line">    <span class="variable">$_REQUEST</span></span><br><span class="line">        <span class="variable">$_GET</span></span><br><span class="line">        <span class="variable">$_POST</span></span><br><span class="line">        <span class="variable">$_COOKIE</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><h4 id="错误控制运算符"><a href="#错误控制运算符" class="headerlink" title="错误控制运算符"></a>错误控制运算符</h4><p>@</p>
<h4 id="运算符优先级"><a href="#运算符优先级" class="headerlink" title="运算符优先级"></a>运算符优先级</h4><ul>
<li>递增递减 &gt; 逻辑运算符 &gt; 算数运算符 &gt; 比较运算符 &gt; 逻辑与 &gt; 逻辑或 &gt; 三元运算符 &gt; 赋值 &gt; and &gt; xor &gt; or</li>
<li>(++–)  &gt;    (!)    &gt;   (+-*&#x2F;)  &gt;    (&lt;&gt;&#x3D;)   &gt; (&amp;&amp;)  &gt;  (||) &gt;    (?:)    &gt; (&#x3D;) &gt; and &gt; xor &gt;  or</li>
</ul>
<h4 id="算数运算符"><a href="#算数运算符" class="headerlink" title="算数运算符"></a>算数运算符</h4><ol>
<li><code>+</code> 加</li>
<li><code>-</code> 减</li>
<li><code>*</code> 乘</li>
<li><code>/</code> 除</li>
<li><code>%</code> 模(余数)</li>
<li><code>**</code> 次方</li>
</ol>
<h4 id="赋值运算符"><a href="#赋值运算符" class="headerlink" title="赋值运算符"></a>赋值运算符</h4><ol>
<li><code>=</code> 把右边表达式的值赋给左边的运算数</li>
<li><code>+=</code></li>
<li><code>-=</code></li>
<li><code>*=</code></li>
<li><code>/=</code></li>
<li><code>%=</code></li>
<li><code>**=</code></li>
<li>引用赋值 <code>$a = &amp;$b</code></li>
</ol>
<h4 id="位运算符"><a href="#位运算符" class="headerlink" title="位运算符"></a>位运算符</h4><blockquote>
<p><a href="https://blog.csdn.net/weixin_38296030/article/details/88353914" target="_blank" rel="noopener">https://blog.csdn.net/weixin_38296030/article/details/88353914</a></p>
</blockquote>
<ol>
<li><code>~ $a</code>  Not 按位取反：1换成0，0换成1</li>
<li><code>$a &lt;&lt; $b</code> Shift left 左移: 将 $a 中的位向左移动 $b 次（每一次移动都表示”乘以 2”）。</li>
<li><code>$a &gt;&gt; $b</code> Shift right 右移: 将 $a 中的位向右移动 $b 次（每一次移动都表示”除以 2”）。</li>
<li><code>$a &amp; $b</code> And 按位与：将把 $a 和 $b 中都为 1 的位设为 1。</li>
<li><code>$a ^ $b</code> Xor 按位异或： 将把 $a 和 $b 中一个为 1 另一个为 0 的位设为 1。</li>
<li><code>$a | $b</code> Or 按位或： 将把 $a 和 $b 中任何一个为 1 的位设为 1。</li>
</ol>
<p>解释：</p>
<ul>
<li><p>原码</p>
<blockquote>
<p>正数的<font color="red"><b>原码</b></font>是 按照绝对值大小转换成的二进制数<br>负数的<font color="red"><b>原码</b></font>是 按照绝对值大小转换成的二进制数，最高位补1</p>
</blockquote>
</li>
<li><p>补码</p>
<blockquote>
<p>正数的<font color="green"><b>补码</b></font> &#x3D;&#x3D; <font color="red"><b>原码</b></font><br>负数的<font color="green"><b>补码</b></font> &#x3D;&#x3D; 补码除符号外，各位取反，最后+1</p>
</blockquote>
</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$a</span> = -<span class="number">3</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//a的原码是 1000000000000011</span></span><br><span class="line"><span class="comment">//a的补码是 1111111111111101 也就是二进制码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//b的原码是 0000000000000100</span></span><br><span class="line"><span class="comment">//b的补码是 0000000000000100 也就是二进制码</span></span><br></pre></td></tr></table></figure>
<p><font color="red">记忆：如何获取负数的二进制码？</font></p>
<ol>
<li>获取负数的原码</li>
<li>获取负数的补码</li>
<li>补码就是二进制码</li>
</ol>
<h4 id="比较运算符"><a href="#比较运算符" class="headerlink" title="比较运算符"></a>比较运算符</h4><ol>
<li><code>$a == $b</code> 等于</li>
<li><code>$a === $b</code> 全等</li>
<li><code>$a != $b</code> 不等</li>
<li><code>$a &lt;&gt; $b</code> 不等</li>
<li><code>$a !== $b</code> 不全等</li>
<li><code>$a &lt; $b</code> 小于</li>
<li><code>$a &gt; $b</code> 大于</li>
<li><code>$a &lt;= $b</code> 小于等于</li>
<li><code>$a &gt;= $b</code>  大于等于</li>
<li><code>$a &lt;=&gt; $b</code>  太空船运算符（组合比较符）</li>
<li><code>$a ?? $b ?? $c</code>  NULL 合并操作符</li>
</ol>
<h4 id="无-执行运算符"><a href="#无-执行运算符" class="headerlink" title="无-执行运算符"></a>无-执行运算符</h4><h4 id="递增递减运算符"><a href="#递增递减运算符" class="headerlink" title="递增递减运算符"></a>递增递减运算符</h4><p>重点：</p>
<ol>
<li>布尔值无影响</li>
<li>递增null 会变成1，递减不会变</li>
<li>符号在前就先运算，再使用</li>
<li>短路题，从左到右对比两个符号</li>
</ol>
<p>试题</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$a</span> = <span class="number">0</span>;</span><br><span class="line"><span class="variable">$b</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$a</span> = <span class="number">3</span> &gt; <span class="number">0</span> || <span class="variable">$b</span> = <span class="number">3</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">	<span class="variable">$a</span>++;</span><br><span class="line">	<span class="variable">$b</span>++;</span><br><span class="line">	<span class="keyword">echo</span> <span class="variable">$a</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">	<span class="keyword">echo</span> <span class="variable">$b</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//先执行 (3 &gt; 0) 从左到右看，其实就是在给$a赋值，看$a= 后面的值是多少</span></span><br><span class="line"><span class="comment">//再执行 (3 &gt; 0 || $b = 3 &gt; 0) 得出结果赋值给$a</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#结果11</span></span><br></pre></td></tr></table></figure>

<h4 id="无-逻辑运算符"><a href="#无-逻辑运算符" class="headerlink" title="无-逻辑运算符"></a>无-逻辑运算符</h4><h4 id="无-无-字符串运算符"><a href="#无-无-字符串运算符" class="headerlink" title="无-无-字符串运算符"></a>无-无-字符串运算符</h4><h4 id="无-类型运算符"><a href="#无-类型运算符" class="headerlink" title="无-类型运算符"></a>无-类型运算符</h4><hr>
<h3 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h3><h4 id="switch"><a href="#switch" class="headerlink" title="switch"></a>switch</h4><ol>
<li>判断的值，只能是 <font color="red">整型、浮点、字符串以及表达式</font></li>
<li>在switch中的continue和break效果一样，foreach中continue是继续的意思</li>
</ol>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><h4 id="返回值-return"><a href="#返回值-return" class="headerlink" title="返回值 return"></a>返回值 <code>return</code></h4><ol>
<li>返回值不能是多个值，可以通过数组返回</li>
<li>如果没有设置返回，则执行完函数 结果是 <code>null</code></li>
</ol>
<h4 id="自定义函数-已验证，是正确的"><a href="#自定义函数-已验证，是正确的" class="headerlink" title="自定义函数(已验证，是正确的)"></a>自定义函数(已验证，是正确的)</h4><ul>
<li>函数静态值修改</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeNumber</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">static</span> <span class="variable">$number</span> = <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="variable">$number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$number</span> = changeNumber();</span><br><span class="line"><span class="variable">$number</span> = <span class="number">10</span>;</span><br><span class="line">var_dump(changeNumber());</span><br><span class="line"><span class="comment">#这样无法修改，需要引用函数</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> &amp;<span class="title">changeNumber</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">static</span> <span class="variable">$number</span> = <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="variable">$number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$number</span> = &amp;changeNumber();</span><br><span class="line"><span class="variable">$number</span> = <span class="number">10</span>;</span><br><span class="line">var_dump(changeNumber());</span><br><span class="line"><span class="comment">#修改成功</span></span><br></pre></td></tr></table></figure>

<ul>
<li>如果要修改函数的参数值，可以使用 引用传参</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$number</span> = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeNumber</span>(<span class="params"><span class="variable">$number</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="variable">$number</span> = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">changeNumber(<span class="variable">$number</span>);</span><br><span class="line">var_dump(<span class="variable">$number</span>);</span><br><span class="line"><span class="comment">#不会进行修改</span></span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$number</span> = <span class="number">1</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeNumber</span>(<span class="params">&amp;<span class="variable">$number</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="variable">$number</span> = <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line">changeNumber(<span class="variable">$number</span>);</span><br><span class="line">var_dump(<span class="variable">$number</span>);</span><br><span class="line"><span class="comment">#引用传参，会进行修改</span></span><br><span class="line"><span class="comment">#结果2</span></span><br></pre></td></tr></table></figure>
<h4 id="系统内置函数"><a href="#系统内置函数" class="headerlink" title="系统内置函数"></a>系统内置函数</h4><h5 id="IP处理函数"><a href="#IP处理函数" class="headerlink" title="IP处理函数"></a>IP处理函数</h5><ul>
<li>ip2long()</li>
<li>long2ip()</li>
</ul>
<h5 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h5><h5 id="打印函数"><a href="#打印函数" class="headerlink" title="打印函数"></a>打印函数</h5><p>重点</p>
<ol>
<li>排序</li>
<li>语法结构&#x2F;函数</li>
<li>是否可以打印多个值</li>
<li>是否可以打印数据类型</li>
<li>是否有返回值</li>
<li>应用场景</li>
</ol>
<table>
<thead>
<tr>
<th>*</th>
<th>语法结构(√) 函数(△)</th>
<th>可打印多个值</th>
<th>数据类型</th>
<th>有返回值</th>
<th>其他</th>
</tr>
</thead>
<tbody><tr>
<td>print</td>
<td>√</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>echo</td>
<td>√</td>
<td>√</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>print_r</td>
<td>△</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>var_dump</td>
<td>△</td>
<td>√</td>
<td>√</td>
<td></td>
<td></td>
</tr>
<tr>
<td>printf</td>
<td>△</td>
<td></td>
<td></td>
<td></td>
<td>格式化输出</td>
</tr>
<tr>
<td>sprintf</td>
<td>△</td>
<td></td>
<td></td>
<td>√</td>
<td>格式化输出</td>
</tr>
</tbody></table>
<h5 id="序列化和反序列化"><a href="#序列化和反序列化" class="headerlink" title="序列化和反序列化"></a>序列化和反序列化</h5><blockquote>
<p>序列化对象时，保存对象的所有变量，但是不会保存对象的方法，只会保存类的名字。</p>
</blockquote>
<ul>
<li>serialize</li>
<li>unserialize</li>
</ul>
<h5 id="字符串处理函数"><a href="#字符串处理函数" class="headerlink" title="字符串处理函数"></a>字符串处理函数</h5><p>bin2hex() 2进制字符串转为16进制，字节方式<br>hex2bin() 16进制字符串转为2进制，字节方式<br>chr() ascii码转为字符<br>ord() 字符转为ascii码<br>trim()<br>ltrim()<br>rtrim() 或 chop()</p>
<p>expload($glue符号, $str, [$limit]) 使用一个字符串分割另一个字符串 返回array<br>str_split($str, $split_lenth)<br>implode($glue符号, $array) 或 join() 将一个一维数组的值转化为字符串<br>stripos($str, $find_str) 查找字符串首次出现的位置 不区分大小写<br>strpos($str, $find_str) 找字符串首次出现的位置</p>
<p>stristr($str, $find_str, $false:如果是true，则返回字符串出现位置的前面部分) 查找字符串的首次出现 不区分大小写<br>strstr($str, $find_str, $false:如果是true，则返回字符串出现位置的前面部分) 查找字符串的首次出现<br>strtr 转换指定字符<br>strrchr($str, $find_str) 查找字符串的最后一次出现<br>substr($str, $start, [$length]]) 返回字符串的子串<br>strrev($str) 反转字符串<br>lcfirst 使一个字符串的第一个字符小写</p>
<p>strtolower() 将字符串全部转换成小写<br>strtoupper() 将字符串全部转换成大写<br>ucfirst() 将字符串首位转换成小写<br>uncwords() 将字符串首位转换成大写</p>
<p>money_format() 将数字格式化成 货币字符串<br>number_format() 将数字格式化</p>
<ul>
<li>格式化的数字</li>
<li>保留的小数位数</li>
<li>小数点符号</li>
<li>千分位分隔符显示的字符</li>
</ul>
<p>md5 计算字符串的 MD5 散列值<br>mdt_file 计算文件 MD5 散列值<br>crype() 单向字符串散列<br>password_hash() 封装的crype，哈希算法，足够强的盐值<br>password_verify() 验证密码是否和散列值匹配<br>password_get_info() 返回指定散列（hash）的相关信息</p>
<p>str_repeat($str, $count) 返回 一个重复n次的字符串<br>str_replace(‘字符串或数组’,’字符串或数组’,$str) 字符串替换<br>strstr 或 strchr</p>
<p>str_shuffle 随机打乱一个字符串<br>rand<br>mt_rand()</p>
<p>输入安全<br>stripslashes 反引用一个使用 addcslashes() 转义的字符串<br>htmlentities — 将字符转换为 HTML 转义字符<br>htmlspecialchars<br>strip_tags 从字符串中去除 HTML 和 PHP 标记</p>
<p>做总结，考点</p>
<h5 id="数组处理函数"><a href="#数组处理函数" class="headerlink" title="数组处理函数"></a>数组处理函数</h5><blockquote>
<p>r:reversal反转<br>k:key健名<br>a:value健值<br>u:custom自定义</p>
</blockquote>
<p>sort()	对数值数组进行升序排序。<br>rsort()	对数值数组进行降序排序。</p>
<p>ksort()	    对关联数组按照键名升序排序。<br>krsort()	对关联数组按照键名降序排序。</p>
<p>asort()	    对关联数组按照键值进行升序排序。<br>arsort()	对关联数组按照键值进行降序排序。</p>
<p>usort()	    使用用户自定义的比较函数对数组进行排序。<br>uasort()	使用用户自定义的比较函数对数组中的键值进行排序。<br>uksort()	使用用户自定义的比较函数对数组中的键名进行排序。</p>
<p>array_multisort()	对多个数组或多维数组进行排序。</p>
<p>其他：<br>array_change_key_case($arr,CASE_XX) 将数组中的键名修改成大小写 lower upper<br>array_chunk($array, $size, [false]如果设置为true，则保留键名)<br>array_column($array, ‘column_name’,[键名])<br>array_count_values() 统计数组中的值 结果为 <code>[&#39;值1&#39; =&gt; 次数,&#39;值2&#39; =&gt; 次数]</code><br>array_keys()<br>array_values()<br>array_key_exists()<br>array_mer<br>array_rand</p>
<h3 id="类与对象-单一继承-单一接口"><a href="#类与对象-单一继承-单一接口" class="headerlink" title="类与对象 (单一继承 单一接口)"></a>类与对象 (单一继承 单一接口)</h3><h4 id="类的自动加载"><a href="#类的自动加载" class="headerlink" title="类的自动加载"></a>类的自动加载</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 自动加载函数，在PHP5中，当我们实例化一个未定义的类时，就会触发此函数。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">__autoload</span>(<span class="params"><span class="variable">$class</span></span>)</span>&#123;</span><br><span class="line">    <span class="comment">#这里去require_once需要的文件</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用SPL标准库的自动加载函数，将函数注册到SPL的 __autoload函数中，三种书写方式</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&quot;core/Loader.php&quot;</span>;</span><br><span class="line">spl_autoload_register(<span class="variable">$autoload_function</span>);</span><br><span class="line">spl_autoload_register(<span class="string">&quot;\\core\\Loader::autoload&quot;</span>);</span><br><span class="line">spl_autoload_register([<span class="string">&#x27;类名&#x27;</span>,<span class="string">&#x27;方法名&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">## 注意事项：如果在你的程序中已经实现了__autoload函数，它必须显式注册到__autoload栈中。</span></span><br><span class="line"><span class="comment">## 因为spl_autoload_register()函数会将Zend Engine中的__autoload函数取代为spl_autoload() 或 spl_autoload_call()。</span></span><br></pre></td></tr></table></figure>
<h4 id="访问控制关键字"><a href="#访问控制关键字" class="headerlink" title="访问控制关键字"></a>访问控制关键字</h4><ul>
<li><code>public</code> (默认)</li>
<li><code>private</code>(用于本类调用)</li>
<li><code>protected</code>(用于本类和继承类调用)</li>
</ul>
<h4 id="构造函数和析构函数"><a href="#构造函数和析构函数" class="headerlink" title="构造函数和析构函数"></a>构造函数和析构函数</h4><blockquote>
<p>如果方法名和类名一样，则也是构造函数 php7已经将其废弃</p>
</blockquote>
<ul>
<li><code>__construct()</code> 类创建时，执行</li>
<li><code>__destruct()</code> 类销毁时，执行</li>
</ul>
<h4 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h4><p>特点</p>
<ol>
<li>定义为抽象的类不能被实例化</li>
<li>如果它里面至少有一个方法是被声明为抽象的，那么这个类就必须被声明为抽象的</li>
<li>被定义为抽象的方法只是声明了其调用方式（参数），不能定义其具体的功能实现。</li>
<li>继承抽象类时，必须继承抽象类的所有方法及参数 包括 权限控制修饰符</li>
</ol>
<h4 id="魔术方法"><a href="#魔术方法" class="headerlink" title="魔术方法"></a>魔术方法</h4><blockquote>
<p>不可访问包括：不存在、无权限</p>
</blockquote>
<ul>
<li><code>__isset()</code> 将不可访问的属性进行 <code>isset()</code> 或 <code>empty()</code> 时，执行</li>
<li><code>__unset()</code> 将不可访问的属性进行 <code>unset()</code> 时，执行</li>
<li><code>__set()</code> 给不可访问的属性赋值时，执行</li>
<li><code>__get()</code> 获取不可访问的属性值时，执行</li>
<li><code>__call()</code> 访问不可访问的方法时，执行</li>
<li><code>__callStatic()</code> 访问不可访问的静态方法时，执行</li>
<li><code>__toString()</code> 当对象转换成字符串时，执行。方法内部必须返回一个字符串供外部查看</li>
<li><code>__invoke($param)</code> 把对象当成函数运行时，执行: <code>$a = (new Obj)()</code></li>
<li><code>__sleep()</code> 使用 <code>serialize</code> 操作该类时，执行</li>
<li><code>__wakeup()</code> 使用 <code>unserialize</code> 操作该类时，执行</li>
<li><code>__clone()</code> 克隆对象时，执行</li>
</ul>
<h4 id="Final-禁止继承-x2F-覆盖"><a href="#Final-禁止继承-x2F-覆盖" class="headerlink" title="Final 禁止继承&#x2F;覆盖"></a>Final 禁止继承&#x2F;覆盖</h4><blockquote>
<p>只适用于方法和类</p>
</blockquote>
<ul>
<li>如果 <code>声明方法为 final 时</code>，继承该类的类方法无法覆盖</li>
<li>如果 <code>声明类为 final 时</code>，类无法继承</li>
</ul>
<h4 id="代码复用"><a href="#代码复用" class="headerlink" title="代码复用"></a>代码复用</h4><blockquote>
<p>Trait 为了减少单继承语言的限制</p>
</blockquote>
<p>优先级: 类(调用类或者衍生类)的方法 &gt; Trait的方法 &gt; 被继承的类方法</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">SayWorld</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="built_in">parent</span>::sayHello();</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&#x27;2 &#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">echo</span> <span class="string">&#x27;3 &#x27;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHelloWorld</span> <span class="keyword">extends</span> <span class="title">Base</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">use</span> <span class="title">SayWorld</span>;</span><br><span class="line">	<span class="comment">// public function sayHello()</span></span><br><span class="line">	<span class="comment">// &#123;</span></span><br><span class="line">	<span class="comment">// 	echo &#x27;1 &#x27;;</span></span><br><span class="line">	<span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$o</span> = <span class="keyword">new</span> MyHelloWorld();</span><br><span class="line"><span class="variable">$o</span>-&gt;sayHello();</span><br><span class="line"></span><br><span class="line">&gt; 输出：Hello World!</span><br></pre></td></tr></table></figure>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">trait</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;Hello World!&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TheWorldIsNotEnough</span> </span>&#123;</span><br><span class="line">    <span class="keyword">use</span> <span class="title">HelloWorld</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;Hello Universe!&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$o</span> = <span class="keyword">new</span> TheWorldIsNotEnough();</span><br><span class="line"><span class="variable">$o</span>-&gt;sayHello();</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&gt; 输出：Hello Universe!</span><br></pre></td></tr></table></figure>



<h3 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h3><h4 id="外部文件引入"><a href="#外部文件引入" class="headerlink" title="外部文件引入"></a>外部文件引入</h4><p>include&#x2F;require和include_once&#x2F;require_one</p>
<ul>
<li>后者会检查是否包含过该文件，如果包含过就不再包含</li>
<li>include和require的区别：require找不到文件或报致命错误，前者只是报警告</li>
<li>如果在include&#x2F;require没有给出路径名，默认从include_path&#x2F;require_path路径寻找文件，如果还没有，则从脚本文件目录找</li>
</ul>
<h4 id="链式操作-实现"><a href="#链式操作-实现" class="headerlink" title="链式操作 实现"></a>链式操作 实现</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserModel</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">where</span>(<span class="params"><span class="variable">$where</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">limit</span>(<span class="params"><span class="variable">$limit</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">order</span>(<span class="params"><span class="variable">$order</span> = <span class="literal">null</span></span>)</span></span><br><span class="line"><span class="function">	</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">$this</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$user</span> = (<span class="keyword">new</span> UserModel())</span><br><span class="line">	-&gt;where(<span class="string">&#x27;id=1&#x27;</span>)</span><br><span class="line">	-&gt;order(<span class="string">&quot;id desc&quot;</span>)</span><br><span class="line">	-&gt;limit(<span class="string">&quot;1&quot;</span>);</span><br></pre></td></tr></table></figure>
<h4 id="SPL标准库-提供的-数据结构"><a href="#SPL标准库-提供的-数据结构" class="headerlink" title="SPL标准库 提供的 数据结构"></a>SPL标准库 提供的 数据结构</h4><ol>
<li><code>SplQueue</code> 队列：先进先出</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$spl_queue</span> = <span class="keyword">new</span> <span class="built_in">SplQueue</span>();</span><br><span class="line"><span class="variable">$spl_queue</span>-&gt;enqueue(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="variable">$spl_queue</span>-&gt;enqueue(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">var_dump(<span class="variable">$spl_queue</span>-&gt;dequeue());<span class="comment">#a</span></span><br><span class="line">var_dump(<span class="variable">$spl_queue</span>-&gt;dequeue());<span class="comment">#b</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li><code>SplStack</code> 栈：先进后出</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$spl_stack</span> = <span class="keyword">new</span> <span class="built_in">SplStack</span>();</span><br><span class="line"><span class="variable">$spl_stack</span>-&gt;push(<span class="string">&quot;a&quot;</span>);</span><br><span class="line"><span class="variable">$spl_stack</span>-&gt;push(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">var_dump(<span class="variable">$spl_stack</span>-&gt;pop());<span class="comment">#b</span></span><br><span class="line">var_dump(<span class="variable">$spl_stack</span>-&gt;pop());<span class="comment">#a</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li><code>SplMinHeap &amp; SplMaxHeap</code></li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//最小堆：先进先出(不确定是否先进先出，要验证之后才知道)</span></span><br><span class="line"><span class="variable">$spl_min_heap</span> = <span class="keyword">new</span> <span class="built_in">SplMinHeap</span>();</span><br><span class="line"><span class="variable">$spl_min_heap</span>-&gt;insert(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="variable">$spl_min_heap</span>-&gt;insert(<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line">var_dump(<span class="variable">$spl_min_heap</span>-&gt;extract());<span class="comment">#a</span></span><br><span class="line">var_dump(<span class="variable">$spl_min_heap</span>-&gt;extract());<span class="comment">#b</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//最大堆：先进后出(不确定是否先进后出，要验证之后才知道)</span></span><br><span class="line"><span class="variable">$spl_max_heap</span> = <span class="keyword">new</span> <span class="built_in">SplMaxHeap</span>();</span><br><span class="line"><span class="variable">$spl_max_heap</span>-&gt;insert(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="variable">$spl_max_heap</span>-&gt;insert(<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line">var_dump(<span class="variable">$spl_max_heap</span>-&gt;extract());<span class="comment">#b</span></span><br><span class="line">var_dump(<span class="variable">$spl_max_heap</span>-&gt;extract());<span class="comment">#a</span></span><br></pre></td></tr></table></figure>
<ol start="4">
<li><code>SplFixedArray($size)</code> 固定长度的数组</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$spl_fixed_array</span> = <span class="keyword">new</span> <span class="built_in">SplFixedArray</span>(<span class="number">3</span>);</span><br><span class="line"><span class="variable">$spl_fixed_array</span>[<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">var_dump(<span class="variable">$spl_fixed_array</span>);</span><br><span class="line"><span class="comment">#结果</span></span><br><span class="line"><span class="comment">//object(SplFixedArray)#1 (3) &#123;</span></span><br><span class="line"><span class="comment">//[0]=&gt;</span></span><br><span class="line"><span class="comment">//  NULL</span></span><br><span class="line"><span class="comment">//  [1]=&gt;</span></span><br><span class="line"><span class="comment">//  NULL</span></span><br><span class="line"><span class="comment">//  [2]=&gt;</span></span><br><span class="line"><span class="comment">//  int(1)</span></span><br><span class="line"><span class="comment">//&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="函数参考"><a href="#函数参考" class="headerlink" title="函数参考"></a>函数参考</h2><h3 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h3><ul>
<li><code>getcwd()</code> 获取当前目录(与linux的pwd不同，切记)</li>
<li><code>chdir()</code> 改变当前目录</li>
<li><code>chroot()</code> 改变根目录(window下不可操作,还需要Root权限)</li>
<li><code>dir($path)</code> 返回一个目录实例{path,read,handle}</li>
<li><code>opendir($path)</code> 打开目录句柄</li>
<li><code>readdir(实例)</code> 从目录句柄中读取条目</li>
<li><code>rewinddir(实例)</code> 将目录指针设置为第一个(倒回目录句柄)</li>
<li><code>closedir(实例)</code> 关闭目录句柄</li>
<li><code>scandir($path)</code> 列出所有目录和文件</li>
</ul>
<h3 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h3><ol>
<li><code>string basename( string $path[, string $suffix] )</code> 返回路径中的文件名部分<ul>
<li><code>path</code> 一个路径</li>
<li><code>suffix</code> 如果文件名是以 <code>suffix</code> 结束的，那这一部分也会被去掉。<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">&quot;1) &quot;</span>.basename(<span class="string">&quot;/etc/sudoers.d&quot;</span>, <span class="string">&quot;.d&quot;</span>).PHP_EOL;  <span class="comment">#sudoers</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;2) &quot;</span>.basename(<span class="string">&quot;/etc/passwd&quot;</span>).PHP_EOL; <span class="comment">#passwd</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;3) &quot;</span>.basename(<span class="string">&quot;/etc/&quot;</span>).PHP_EOL; <span class="comment">#etc</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;4) &quot;</span>.basename(<span class="string">&quot;.&quot;</span>).PHP_EOL; <span class="comment">#.</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;5) &quot;</span>.basename(<span class="string">&quot;/&quot;</span>); <span class="comment">#null 也就是&quot;&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><code>string dirname( string $path)</code> 返回路径中的目录部分<ul>
<li><code>path</code> 一个路径</li>
</ul>
</li>
</ol>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> dirname(<span class="string">&quot;/etc/passwd&quot;</span>) . PHP_EOL; <span class="comment"># /etc</span></span><br><span class="line"><span class="keyword">echo</span> dirname(<span class="string">&quot;/etc/&quot;</span>) . PHP_EOL; <span class="comment"># / (or \ on Windows)</span></span><br><span class="line"><span class="keyword">echo</span> dirname(<span class="string">&quot;.&quot;</span>); <span class="comment"># .</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<ol start="3">
<li><code>bool chgrp( string $filename, mixed $group)</code> 尝试将文件 <code>filename</code> 所属的组改成 <code>group</code>（通过组名或组 ID 指定）。<ul>
<li><code>filename</code> 文件的路径。</li>
<li><code>group</code> 组的名称或数字。</li>
</ul>
</li>
<li><code>bool chmod( string $filename, int $mode)</code> 改变文件模式<ul>
<li><code>filename</code> 文件的路径。</li>
<li><code>group</code> 组的名称或数字。 8进制数：数字 1 表示使文件可执行，数字 2 表示使文件可写，数字 4 表示使文件可读。 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod(<span class="string">&quot;/somedir/somefile&quot;</span>, <span class="number">0755</span>);  <span class="comment">// 八进制数，正确的 mode 值</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><code>float disk_free_space( string $directory)</code> 或 <code>diskfreespace</code> 返回目录中的可用空间：字节数<ul>
<li><code>directory</code> 文件系统目录或者磁盘分区。 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// $df 包含根目录下可用的字节数</span></span><br><span class="line"><span class="variable">$df</span> = disk_free_space(<span class="string">&quot;/&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//在 Windows 下:</span></span><br><span class="line"><span class="variable">$df_c</span> = disk_free_space(<span class="string">&quot;C:&quot;</span>);</span><br><span class="line"><span class="variable">$df_d</span> = disk_free_space(<span class="string">&quot;D:&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><code>float disk_total_space( string $directory)</code> 返回一个目录的磁盘总大小<ul>
<li><code>directory</code> 文件系统目录或者磁盘分区。 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#同上</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><code>pathinfo($path)</code> 返回文件路径的信息<ul>
<li><code>directory</code> 文件系统目录或者磁盘分区。 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$path_parts</span> = pathinfo(<span class="string">&#x27;/www/htdocs/inc/lib.inc.php&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$path_parts</span>[<span class="string">&#x27;dirname&#x27;</span>], <span class="string">&quot;\n&quot;</span>;  <span class="comment">#/www/htdocs/inc</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$path_parts</span>[<span class="string">&#x27;basename&#x27;</span>], <span class="string">&quot;\n&quot;</span>; <span class="comment">#lib.inc.php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$path_parts</span>[<span class="string">&#x27;extension&#x27;</span>], <span class="string">&quot;\n&quot;</span>; <span class="comment">#php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$path_parts</span>[<span class="string">&#x27;filename&#x27;</span>], <span class="string">&quot;\n&quot;</span>; <span class="comment">// #lib.inc</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><code>rmdir()</code> 删除目录</li>
<li><code>unlink()</code> 删除文件</li>
<li><code>filemtime()</code> 文件修改时间</li>
<li><code>fileatime()</code> 文件上次访问时间</li>
<li><code>fileowner()</code> 文件所有者</li>
<li><code>filesize()</code> 文件大小</li>
<li><code>filetype()</code> 文件类型</li>
<li><code>fopen()</code> 打开文件或url</li>
</ol>
<ul>
<li>写入模式</li>
</ul>
<table>
<thead>
<tr>
<th><code>mode</code></th>
<th>打开模式</th>
<th>指针位置</th>
<th>是否清空</th>
<th>不存在是否创建</th>
</tr>
</thead>
<tbody><tr>
<td><code>r</code></td>
<td>只读</td>
<td>头部</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>r+</code></td>
<td>读写</td>
<td>头部</td>
<td></td>
<td></td>
</tr>
<tr>
<td><code>w</code></td>
<td>写入</td>
<td>头部</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td><code>w+</code></td>
<td>读写</td>
<td>头部</td>
<td>√</td>
<td>√</td>
</tr>
<tr>
<td><code>a</code></td>
<td>写入</td>
<td>尾部</td>
<td></td>
<td>√</td>
</tr>
<tr>
<td><code>a+</code></td>
<td>读写</td>
<td>尾部</td>
<td></td>
<td>√</td>
</tr>
<tr>
<td><code>x</code></td>
<td>写入</td>
<td>头部</td>
<td></td>
<td>返回 <code>false</code> 并生成一条 <code>E_WARNING</code> 级别的错误信息</td>
</tr>
<tr>
<td><code>x+</code></td>
<td>读写</td>
<td>头部</td>
<td></td>
<td>返回 <code>false</code> 并生成一条 <code>E_WARNING</code> 级别的错误信息</td>
</tr>
</tbody></table>
<ol start="16">
<li><code>fclose()</code></li>
<li><code>flock()</code> 文件锁定</li>
<li><code>fread()</code> 读取文件</li>
<li><code>fwrite() || fputs()</code> 写入文件</li>
<li><code>mkdir()</code> 新建目录</li>
</ol>
<h4 id="文件指针"><a href="#文件指针" class="headerlink" title="文件指针"></a>文件指针</h4><ol>
<li>ftell</li>
<li>fseek</li>
<li>rewind</li>
</ol>
<h4 id="读取文件"><a href="#读取文件" class="headerlink" title="读取文件"></a>读取文件</h4><ol>
<li><code>fgets()</code> 获取一行</li>
<li><code>fgetc()</code> 获取一个字符</li>
</ol>
<p>真题1：循环将hello world添加至文件的第一行<br>重点：</p>
<ul>
<li>打开模式需要考虑：<ol>
<li>打开方式</li>
<li>是否清空</li>
<li>指针位置</li>
<li>是否创建<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//初始化文件</span></span><br><span class="line"><span class="variable">$file</span> = <span class="string">&quot;hello.txt&quot;</span>;</span><br><span class="line"><span class="keyword">if</span> (is_file(<span class="variable">$file</span>)) &#123;</span><br><span class="line">	unlink(<span class="variable">$file</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个文件</span></span><br><span class="line"><span class="variable">$f</span> = fopen(<span class="variable">$file</span>, <span class="string">&#x27;w&#x27;</span>);</span><br><span class="line">fwrite(<span class="variable">$f</span>, <span class="string">&#x27;hello world!&#x27;</span>);</span><br><span class="line">fclose(<span class="variable">$f</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable">$count</span> = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="variable">$count</span>; <span class="variable">$i</span>++) &#123;</span><br><span class="line">	<span class="comment">//读取文件内容</span></span><br><span class="line">	<span class="variable">$f</span> = fopen(<span class="variable">$file</span>, <span class="string">&#x27;r&#x27;</span>);</span><br><span class="line">	flock(<span class="variable">$f</span>, LOCK_SH);<span class="comment">//取得共享锁定（读取的程序）</span></span><br><span class="line">	<span class="variable">$content</span> = fread(<span class="variable">$f</span>, filesize(<span class="variable">$file</span>));</span><br><span class="line">	flock(<span class="variable">$f</span>, LOCK_UN);</span><br><span class="line">	fclose(<span class="variable">$f</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//将文件内容补充</span></span><br><span class="line">	<span class="variable">$new_content</span> = <span class="string">&#x27;hello world!&#x27;</span> . PHP_EOL . <span class="variable">$content</span>;</span><br><span class="line">	<span class="variable">$f</span> = fopen(<span class="variable">$file</span>, <span class="string">&#x27;w&#x27;</span>);</span><br><span class="line">	flock(<span class="variable">$f</span>, LOCK_EX);<span class="comment">//取得独占锁定（写入的程序）</span></span><br><span class="line">	fwrite(<span class="variable">$f</span>, <span class="variable">$new_content</span>);</span><br><span class="line">	flock(<span class="variable">$f</span>, LOCK_UN);</span><br><span class="line">	fclose(<span class="variable">$f</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//清除缓存，否则循环结果会改变</span></span><br><span class="line">	clearstatcache();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ul>
<p>面试题1：PHP遍历一个文件夹下所有文件和子文件夹的函数<br>方式1：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">each_dir</span>(<span class="params"><span class="variable">$path</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">static</span> <span class="variable">$array</span> = []; <span class="comment">//用static的作用是将所有子文件放在最外层，如果不用static则结果会有多维度(浅测试)</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$scandir_arr</span> = scandir(<span class="variable">$path</span>)) &#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="variable">$scandir_arr</span> <span class="keyword">as</span> <span class="variable">$resource</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (in_array(<span class="variable">$resource</span>, [</span><br><span class="line">                <span class="string">&#x27;.&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;..&#x27;</span>,</span><br><span class="line">            ])) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable">$file</span> = <span class="variable">$path</span> . DIRECTORY_SEPARATOR . <span class="variable">$resource</span>;</span><br><span class="line">            <span class="keyword">if</span> (is_dir(<span class="variable">$file</span>)) &#123;</span><br><span class="line">                each_dir(<span class="variable">$file</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (is_file(<span class="variable">$file</span>)) &#123;</span><br><span class="line">                    <span class="variable">$array</span>[] = <span class="variable">$path</span> . <span class="string">&#x27;--&#x27;</span> . <span class="variable">$resource</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$files_arr</span> = each_dir(getcwd());</span><br><span class="line">var_dump(<span class="variable">$files_arr</span>);</span><br></pre></td></tr></table></figure>
<p>方式2：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//rewinddir()没用到</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">each_dir</span>(<span class="params"><span class="variable">$path</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">static</span> <span class="variable">$array</span> = [];</span><br><span class="line">	<span class="keyword">if</span> (is_dir(<span class="variable">$path</span>)) &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="variable">$dir_jubing</span> = opendir(<span class="variable">$path</span>)) &#123;</span><br><span class="line">			<span class="keyword">while</span> ((<span class="variable">$resource</span> = readdir(<span class="variable">$dir_jubing</span>)) !== <span class="literal">false</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="variable">$resource</span> != <span class="string">&#x27;.&#x27;</span> &amp;&amp; <span class="variable">$resource</span> != <span class="string">&#x27;..&#x27;</span>) &#123;</span><br><span class="line">					<span class="variable">$file</span> = <span class="variable">$path</span> . DIRECTORY_SEPARATOR . <span class="variable">$resource</span>;</span><br><span class="line">					<span class="keyword">if</span> (is_dir(<span class="variable">$file</span>)) &#123;</span><br><span class="line">						each_dir(<span class="variable">$file</span>);</span><br><span class="line">					&#125; <span class="keyword">else</span> <span class="keyword">if</span> (is_file(<span class="variable">$file</span>)) &#123;</span><br><span class="line">						<span class="variable">$array</span>[] = <span class="variable">$file</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			closedir(<span class="variable">$dir_jubing</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$files_arr</span> = each_dir(getcwd());</span><br><span class="line">var_dump(<span class="variable">$files_arr</span>);</span><br></pre></td></tr></table></figure>
<p>方式3：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">each_dri</span>(<span class="params"><span class="variable">$path</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">static</span> <span class="variable">$array</span> = [];</span><br><span class="line">	<span class="variable">$dir_shili</span> = dir(<span class="variable">$path</span>);</span><br><span class="line">	<span class="keyword">while</span> ((<span class="variable">$res</span> = <span class="variable">$dir_shili</span>-&gt;read()) !== <span class="literal">false</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="variable">$res</span> != <span class="string">&#x27;.&#x27;</span> &amp;&amp; <span class="variable">$res</span> != <span class="string">&#x27;..&#x27;</span>) &#123;</span><br><span class="line">			<span class="variable">$file</span> = <span class="variable">$path</span> . DIRECTORY_SEPARATOR . <span class="variable">$res</span>;</span><br><span class="line">			<span class="keyword">if</span> (is_dir(<span class="variable">$file</span>)) &#123;</span><br><span class="line">				each_dri(<span class="variable">$file</span>);</span><br><span class="line">			&#125; <span class="keyword">elseif</span> (is_file(<span class="variable">$file</span>)) &#123;</span><br><span class="line">				<span class="variable">$array</span>[] = <span class="variable">$res</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="keyword">continue</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="variable">$array</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var_dump(each_dri(getcwd()));</span><br></pre></td></tr></table></figure>

<hr>
<p>面试题2：PHP复制一个文件夹以及里面的所有文件</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy_dir</span>(<span class="params"><span class="variable">$path</span>, <span class="variable">$newpath</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (is_dir(<span class="variable">$path</span>)) &#123;</span><br><span class="line">		<span class="keyword">if</span> (!is_dir(<span class="variable">$newpath</span>)) &#123;</span><br><span class="line">			mkdir(<span class="variable">$newpath</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (<span class="variable">$dir_jubing</span> = opendir(<span class="variable">$path</span>)) &#123;</span><br><span class="line">			<span class="keyword">while</span> ((<span class="variable">$item</span> = readdir(<span class="variable">$dir_jubing</span>)) !== <span class="literal">false</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="variable">$item</span> != <span class="string">&#x27;.&#x27;</span> &amp;&amp; <span class="variable">$item</span> != <span class="string">&#x27;..&#x27;</span>) &#123;</span><br><span class="line">					<span class="variable">$wanzheng_path</span> = <span class="variable">$path</span> . <span class="string">&#x27;\\&#x27;</span> . <span class="variable">$item</span>;</span><br><span class="line">					<span class="keyword">if</span> (is_dir(<span class="variable">$item</span>)) &#123;</span><br><span class="line">						copy_dir(<span class="variable">$wanzheng_path</span>, <span class="variable">$newpath</span> . <span class="string">&#x27;\\&#x27;</span> . <span class="variable">$item</span>);</span><br><span class="line">					&#125; <span class="keyword">else</span> <span class="keyword">if</span> (is_file(<span class="variable">$wanzheng_path</span>)) &#123;</span><br><span class="line">						copy(<span class="variable">$wanzheng_path</span>, <span class="variable">$newpath</span> . <span class="string">&#x27;\\&#x27;</span> . <span class="variable">$item</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			closedir(<span class="variable">$dir_jubing</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$newpath</span> = <span class="string">&quot;C:\Users\Administrator\Desktop\study_php2&quot;</span>;</span><br><span class="line">copy_dir(getcwd(), <span class="variable">$newpath</span>);</span><br></pre></td></tr></table></figure>

<p>面试题3：PHP删除一个文件夹里面的所有文件，不删除文件夹</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">del_dir</span>(<span class="params"><span class="variable">$path</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (is_dir(<span class="variable">$path</span>)) &#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="variable">$scan_dir_info</span> = scandir(<span class="variable">$path</span>)) &#123;</span><br><span class="line">			<span class="keyword">foreach</span> (<span class="variable">$scan_dir_info</span> <span class="keyword">as</span> <span class="variable">$item</span>) &#123;</span><br><span class="line">				<span class="keyword">if</span> (<span class="variable">$item</span> != <span class="string">&#x27;.&#x27;</span> &amp;&amp; <span class="variable">$item</span> != <span class="string">&#x27;..&#x27;</span>) &#123;</span><br><span class="line">					<span class="variable">$wanzheng_path</span> = <span class="variable">$path</span> . <span class="string">&#x27;\\&#x27;</span> . <span class="variable">$item</span>;</span><br><span class="line">					<span class="keyword">if</span> (is_dir(<span class="variable">$wanzheng_path</span>)) &#123;</span><br><span class="line">						del_dir(<span class="variable">$wanzheng_path</span>);</span><br><span class="line">					&#125; <span class="keyword">elseif</span> (is_file(<span class="variable">$wanzheng_path</span>)) &#123;</span><br><span class="line">						unlink(<span class="variable">$wanzheng_path</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$newpath</span> = <span class="string">&quot;C:\Users\Administrator\Desktop\study_php2&quot;</span>;</span><br><span class="line">del_dir(<span class="variable">$newpath</span>);</span><br></pre></td></tr></table></figure>

<p>注意事项</p>
<ol>
<li>循环遍历目录的时候会多 <code>.</code>和<code>..</code></li>
<li>如果要将结果放置 <code>array</code> 当中，需要使用 <code>static</code> 关键字</li>
</ol>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$zhengze</span> = &lt;&lt;&lt;example</span><br><span class="line"><span class="comment">#问题至少写出一种139开头的11位手机号码的正则表达式</span></span><br><span class="line"><span class="comment">#作用：分割/查找/匹配/替换字符串</span></span><br><span class="line">    分隔符：正斜线(/) hash符号(<span class="comment">#) 取反符号(~)</span></span><br><span class="line">    通用原子：</span><br><span class="line">             \d 十进制 <span class="number">0</span>-<span class="number">9</span></span><br><span class="line">             \D 取反，除了<span class="number">0</span>-<span class="number">9</span></span><br><span class="line">             \w 数字字母下划线</span><br><span class="line">             \W 取反，除了数字字母下划线</span><br><span class="line">             \s 空白符</span><br><span class="line">             \S 取反，除了空白符</span><br><span class="line">    元字符：</span><br><span class="line">            . 除了换行符的任意字符</span><br><span class="line">            * 匹配前面的内容，出现<span class="number">0</span>次一次或者多次</span><br><span class="line">            ? <span class="number">0</span>次或者一次</span><br><span class="line">            ^ 开头</span><br><span class="line">            $ 结尾</span><br><span class="line">            + 出现一次或者多次</span><br><span class="line">            &#123;n&#125; 恰巧出现N次</span><br><span class="line">            &#123;n,&#125; 恰巧出现&gt;=N次</span><br><span class="line">            &#123;n,m&#125; 重复前面匹配的字符n-m次，至少n次，最多m次。</span><br><span class="line">            [] 集合 [abc]匹配a或者b或者c</span><br><span class="line">            () 重复前面匹配的字符n-m次，至少n次，最多m次。</span><br><span class="line">            [^] 取反 [^abc]除了a除了b除了c</span><br><span class="line">            | 或者</span><br><span class="line">            [-] 范围，[<span class="number">0</span>-<span class="number">9</span>]就是<span class="number">0123456789</span></span><br><span class="line">    模式修正符：</span><br><span class="line">            i 不区分大小写</span><br><span class="line">            m 分割字符串后 分别与之匹配</span><br><span class="line">            e 不常用，php7不存在了</span><br><span class="line">            s 修正 .的换行</span><br><span class="line">            U 取消贪婪模式 和 ？一样的效果</span><br><span class="line">            x 忽略模式中的空白符</span><br><span class="line">            A 必须以模式开头</span><br><span class="line">            D 修正$ 对 \n的忽略</span><br><span class="line">            u 进行utf8中文匹配的时候需要用到</span><br><span class="line">后向引用</span><br><span class="line"><span class="variable">$str</span> = <span class="string">&#x27;&lt;b&gt;abc&lt;/b&gt;&#x27;</span>;</span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/&lt;b&gt;(.*)&lt;\/b&gt;/&#x27;</span>;</span><br><span class="line">preg_replace(<span class="variable">$pattern</span>,<span class="string">&#x27;\\1&#x27;</span>,<span class="variable">$str</span>);<span class="comment">#\1是指第一个括号里面匹配到的内容</span></span><br><span class="line"></span><br><span class="line">贪婪模式</span><br><span class="line"><span class="variable">$str</span> = <span class="string">&#x27;&lt;b&gt;abc&lt;/b&gt;&lt;b&gt;xyz&lt;/b&gt;&#x27;</span>;</span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/&lt;b&gt;.*&lt;\/b&gt;/U&#x27;</span>;<span class="comment">#取消贪婪模式</span></span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/&lt;b&gt;.*?&lt;\/b&gt;/&#x27;</span>;<span class="comment">#取消贪婪模式</span></span><br><span class="line">preg_replace_all(<span class="variable">$pattern</span>,<span class="string">&#x27;\\1&#x27;</span>,<span class="variable">$str</span>);<span class="comment">#\1是指第一个括号里面匹配到的内容</span></span><br><span class="line"></span><br><span class="line">匹配手机号</span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/^139\d&#123;8&#125;$/&#x27;</span>;</span><br><span class="line"></span><br><span class="line">email</span><br><span class="line"></span><br><span class="line">ip</span><br><span class="line"></span><br><span class="line">url</span><br><span class="line"></span><br><span class="line">取出所有img标签中的src</span><br><span class="line"><span class="variable">$pattern</span> = <span class="string">&#x27;/&lt;img.*?src=&quot;(.*)?&quot;.*?\/?&gt;/i&#x27;</span>;</span><br><span class="line">.* 匹配多个字符</span><br><span class="line">？取消贪婪模式</span><br><span class="line">(.*)</span><br><span class="line">/i 不区分大小写</span><br><span class="line"></span><br><span class="line">preg_match()     <span class="regexp">//</span>执行匹配正则表达式</span><br><span class="line">preg_match_all() <span class="regexp">//</span>执行一个全局正则表达式匹配</span><br><span class="line">example;</span><br></pre></td></tr></table></figure>


<h2 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h2><hr>
<h3 id="会话控制"><a href="#会话控制" class="headerlink" title="会话控制"></a>会话控制</h3><blockquote>
<p><code>web</code> 是通过http协议使客户端和服务端进行交互，但是http是无状态的，没有方法鉴别用户的状态<br>会话控制就是保留用户状态，用来跟踪和对用户的状态保持</p>
</blockquote>
<p>cookie是存储在用户客户端浏览器或硬盘的技术</p>
<ul>
<li>优点：不占用服务器的资源</li>
<li>缺点：安全性差</li>
<li>基本操作：</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置</span></span><br><span class="line">setcookie(name,value,expire,path,domain,secure);</span><br><span class="line"></span><br><span class="line"><span class="comment">#读取</span></span><br><span class="line"><span class="variable">$_COOKIE</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除</span></span><br><span class="line">setcookie(name,<span class="string">&#x27;&#x27;</span>,-<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<p>session是将用户状态存储在服务器的技术</p>
<ul>
<li>优点：占用服务器资源</li>
<li>缺点：安全性比cookie高</li>
<li>基本操作</li>
</ul>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#开启</span></span><br><span class="line">session_start();</span><br><span class="line"></span><br><span class="line"><span class="comment">#操作</span></span><br><span class="line"><span class="variable">$_SESSION</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#清除session</span></span><br><span class="line"><span class="variable">$_SESSION</span> = [];</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除session文件并把sessionid删除</span></span><br><span class="line">session_destory()</span><br><span class="line"></span><br><span class="line"><span class="comment">#session设置 php.ini</span></span><br><span class="line">session.auto_start <span class="comment">#自动开启session</span></span><br><span class="line">session.cookie_domain <span class="comment">#有效域名</span></span><br><span class="line">session.cookie_lifetime <span class="comment">#存储在cookie的最大生命周期</span></span><br><span class="line">session.cookie_path <span class="comment">#cookie的存放路径</span></span><br><span class="line">session.save_path <span class="comment">#session存放服务器的路径</span></span><br><span class="line">session.use_cookies <span class="comment">#是否使用cookie传递sessionid</span></span><br><span class="line">session.use_trans_id  <span class="comment">#是否可以使用连接传递sessionid</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#垃圾回收机制</span></span><br><span class="line">session.gc_probability <span class="comment">#清理次数</span></span><br><span class="line">session.gc_divisor <span class="comment">#请求次数</span></span><br><span class="line">session.gc_maxlifetime<span class="comment"># 最大生命周期  超过生命周期 视为垃圾</span></span><br></pre></td></tr></table></figure>
<ul>
<li>cookie和session的区别</li>
</ul>
<ol>
<li>存储位置</li>
<li>session存储的是序列化后的对象，session是字符串</li>
<li>session依赖于cookie，如果后者不工作，前者也失效<ul>
<li>因为session工作的机制是将生成的唯一标识PHPSESSID存入cookie中的，所以禁掉cookie，session也不能使用</li>
</ul>
</li>
</ol>
<p>禁用cookie后如何传递sessionid值？</p>
<ol>
<li>可以修改配置<br>session.use_cookies &#x3D; 0；设置客户端不用cookie保存sessionid值<br>session.use_only_cookies &#x3D; 1;  是否只使用cookie传递sessionid<br>session.use_trans_sid &#x3D; 1；  url自动加上PHPSESSID  这样session正常使用</li>
<li>使用url传递sessionid<br><code>&lt;a href=&quot;indx.php?&lt;?php echo session_name(). &#39;=&#39; .session_id();?&gt;&quot;&gt;&lt;/a&gt;</code><br>SID常量在禁用cookie的时候就是session_name和session_id的拼接，否则就是null<br><code>&lt;a href=&quot;indx.php?&lt;?php echo SID；?&gt;&quot;&gt;&lt;/a&gt;</code></li>
</ol>
<h2 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h2><h2 id="OSI七层模型"><a href="#OSI七层模型" class="headerlink" title="OSI七层模型"></a>OSI七层模型</h2><p>第一层：物理层<br>建立维护断开物理连接<br>第二层：数据链路层<br>简历逻辑连接，进行硬件地址寻址，差错校验等功能<br>第三层：网络层<br>进行逻辑地址寻址，实现不同网络之间的不同选择<br>第四层：传输层：定义传输数据<br>定义传输数据的协议端口号，以及流控和差错校验功能<br>TCP UDP数据包一旦离开网卡即进入网络传输层<br>第五层：会话层<br>建立管理终止会话<br>第六层：表示层<br>数据的表示安全压缩<br>第七层：应用层<br>网络服务与最终用户的一个接口，协议有ftp，http，tftp，smtp snmp dns telnet https pop3 dhcp<br>HTTP工作特点和工作原理<br>工作特点：B&#x2F;S模式 无状态，可以使用超文本传输协议<br>原理:客户端请求服务器后，使用tcp协议，指定端口号请求，服务器监听客户端，<br>一旦收到请求，处理请求返回状态码以及内容</p>
<ul>
<li>会话控制</li>
<li>面相对象</li>
<li>网络协议考察点</li>
<li>开发环境及配置</li>
</ul>
<p>面试题2：5种方式获取文件后缀名</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_ext1</span>(<span class="params"><span class="variable">$filename</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> strrchr(<span class="variable">$filename</span>,<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_ext2</span>(<span class="params"><span class="variable">$filename</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> substr(<span class="variable">$filename</span>,strrpos(<span class="variable">$filename</span>,<span class="string">&#x27;.&#x27;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_ext3</span>(<span class="params"><span class="variable">$filename</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> array_pop(explode(<span class="string">&#x27;.&#x27;</span>,<span class="variable">$filename</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_ext4</span>(<span class="params"><span class="variable">$filename</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pathinfo(<span class="variable">$filename</span>,PATHINFO_EXTENSION);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">get_ext5</span>(<span class="params"><span class="variable">$filename</span></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> strrev(substr(strrev(<span class="variable">$filename</span>),<span class="number">0</span>,strpos(strrev(<span class="variable">$filename</span>),<span class="string">&#x27;.&#x27;</span>)));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$filename</span> = <span class="string">&quot;1.php&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> get_ext1(<span class="variable">$filename</span>).<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> get_ext2(<span class="variable">$filename</span>).<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> get_ext3(<span class="variable">$filename</span>).<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> get_ext4(<span class="variable">$filename</span>).<span class="string">&quot;\n&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> get_ext5(<span class="variable">$filename</span>).<span class="string">&quot;\n&quot;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="请简述-cgi-x2F-fast-cgi-x2F-php-fpm-的区别"><a href="#请简述-cgi-x2F-fast-cgi-x2F-php-fpm-的区别" class="headerlink" title="请简述 cgi&#x2F;fast-cgi&#x2F;php-fpm 的区别"></a>请简述 cgi&#x2F;fast-cgi&#x2F;php-fpm 的区别</h2><blockquote>
<p><a href="https://jaminzhang.github.io/web/CGI-FastCGI-PHP-CGI-PHP-FPM-Concepts-Understanding/" target="_blank" rel="noopener">https://jaminzhang.github.io/web/CGI-FastCGI-PHP-CGI-PHP-FPM-Concepts-Understanding/</a></p>
</blockquote>
<img src="/blog/p/1417dc7c/cgi_fast-cgi_php-fpm.png" class="" title="cgi_fast-cgi_php-fpm.png">

<ol>
<li>Apache调用php执行的过程：<code>apache -&gt; httpd -&gt; php5_module -&gt; sapi -&gt; php</code></li>
<li>CGI:全称是“通用网关接口”，专门用来和 web 服务器打交道，缺点是：每一次web请求都会有启动和退出过程，不适合并发情况</li>
<li>FastCGI类似一个常驻(long-live)型的CGI，提高性能，但是因为是多进程，所以比 CGI 多线程消耗更多的服务器内存，PHP-CGI 解释器每进程消耗 7 至 25 兆内存，将这个数字乘以 50 或 100 就是很大的内存数。</li>
<li>PHP-CGI 是 PHP 自带的 FastCGI 管理器。<ul>
<li>php-cgi 变更 php.ini 配置后需重启 php-cgi 才能让新的 php-ini 生效，不可以平滑重启。</li>
<li>直接杀死 php-cgi 进程，php就不能运行了。(PHP-FPM 和 Spawn-FCGI就没有这个问题，守护进程会平滑从新生成新的子进程。）</li>
</ul>
</li>
<li>PHP-FPM 是对于 FastCGI 协议的具体实现<ul>
<li>负责管理一个进程池，来处理来自Web服务器的请求。</li>
<li>通过生成新的子进程可以实现php.ini修改后的平滑重启。</li>
</ul>
</li>
</ol>
<h2 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1. 尽量使用foreach，少用for</span></span><br><span class="line"><span class="comment">#2. 尽量将if拆解成 if+switch 或者 全部是switch的操作</span></span><br><span class="line"><span class="comment">#3. 尽量将在if语句中大概率出现的条件放置在最前面</span></span><br><span class="line"><span class="comment">#4. 尽量使用const 而不使用define</span></span><br><span class="line"><span class="comment">#尽量使用static声明类的方法</span></span><br><span class="line"><span class="comment">#字符串替换中，strtr效率最高</span></span><br><span class="line"><span class="comment">#尽量多用PHP的内置函数</span></span><br><span class="line"><span class="comment">#单双引号的声明</span></span><br></pre></td></tr></table></figure>


<h2 id="SPL-标准异常类"><a href="#SPL-标准异常类" class="headerlink" title="SPL 标准异常类"></a>SPL 标准异常类</h2><p>Standard PHP Library(PHP标准库,PHP5以后编译后自带的框架)为解决一些在Web开发中普遍的问题，提供了一系列的接口(interface)和类库(classes)的。<br>这些所有类库,你都可以在PHP编译本中找到(ext\SPL下的文件夹),基类文件在SPL.PHP等文件内,SPL提供了迭代器(Iterator)、数组对象(ArrayObject)、运行期违例(RuntimeException InvalidArgumentException……)、观察者模式(Observer Pattern)等一些解决方案。</p>
<img src="/blog/p/1417dc7c/spl.exceptions.jpg" class="" title="spl.exceptions">

<h3 id="继承与LogicException的异常类-一般情况下是系统编译时导致的"><a href="#继承与LogicException的异常类-一般情况下是系统编译时导致的" class="headerlink" title="继承与LogicException的异常类(一般情况下是系统编译时导致的)"></a>继承与LogicException的异常类(一般情况下是系统编译时导致的)</h3><h4 id="DomainException-与-RangeException-对应"><a href="#DomainException-与-RangeException-对应" class="headerlink" title="DomainException 与 RangeException 对应"></a>DomainException 与 RangeException 对应</h4><blockquote>
<p>判断某个值不在有效数据域时，抛出异常。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">renderImage</span>(<span class="params"><span class="variable">$imageResource</span>, <span class="variable">$imageType</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (<span class="variable">$imageType</span>) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;jpg&#x27;</span>:</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;jpeg&#x27;</span>:</span><br><span class="line">    header(<span class="string">&#x27;Content-type: image/jpeg&#x27;</span>);</span><br><span class="line">    imagejpeg(<span class="variable">$imageResource</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;png&#x27;</span>:</span><br><span class="line">    header(<span class="string">&#x27;Content-type: image/png&#x27;</span>);</span><br><span class="line">    imagepng(<span class="variable">$imageResource</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">DomainException</span>(<span class="string">&#x27;Unknown image type: &#x27;</span> . <span class="variable">$imageType</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  imagedestroy(<span class="variable">$imageResource</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="InvalidArgumentException"><a href="#InvalidArgumentException" class="headerlink" title="InvalidArgumentException"></a>InvalidArgumentException</h4><blockquote>
<p>如果参数不是期望的类型，则抛出异常。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">tripleInteger</span>(<span class="params"><span class="variable">$int</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!is_int(<span class="variable">$int</span>))</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">InvalidArgumentException</span>(<span class="string">&#x27;tripleInteger function only accepts integers. Input was: &#x27;</span>.<span class="variable">$int</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="variable">$int</span> * <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$x</span> = tripleInteger(<span class="number">4</span>); <span class="comment">//$x == 12</span></span><br><span class="line"><span class="variable">$x</span> = tripleInteger(<span class="number">2.5</span>); <span class="comment">//exception will be thrown as 2.5 is a float</span></span><br><span class="line"><span class="variable">$x</span> = tripleInteger(<span class="string">&#x27;foo&#x27;</span>); <span class="comment">//exception will be thrown as &#x27;foo&#x27; is a string</span></span><br><span class="line"><span class="variable">$x</span> = tripleInteger(<span class="string">&#x27;4&#x27;</span>); <span class="comment">//exception will throw as &#x27;4&#x27; is also a string</span></span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="LengthException"><a href="#LengthException" class="headerlink" title="LengthException"></a>LengthException</h4><blockquote>
<p>如果长度无效，则抛出异常。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="BadFunctionCallException"><a href="#BadFunctionCallException" class="headerlink" title="BadFunctionCallException"></a>BadFunctionCallException</h4><blockquote>
<p>如果回调引用未定义的函数或缺少某些参数，则引发异常。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"><span class="variable">$arg</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$func</span> = <span class="string">&#x27;do&#x27;</span> . <span class="variable">$arg</span>;</span><br><span class="line">    <span class="keyword">if</span> (!is_callable(<span class="variable">$func</span>)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">BadFunctionCallException</span>(<span class="string">&#x27;Function &#x27;</span> . <span class="variable">$func</span> . <span class="string">&#x27; is not callable&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="BadMethodCallException"><a href="#BadMethodCallException" class="headerlink" title="BadMethodCallException"></a>BadMethodCallException</h4><blockquote>
<p>当一个回调方法是一个未定义的方法或缺失一些参数时会抛出该异常。</p>
</blockquote>
<h3 id="继承与RuntimeException的异常类-一般情况下是用户运行时导致的"><a href="#继承与RuntimeException的异常类-一般情况下是用户运行时导致的" class="headerlink" title="继承与RuntimeException的异常类(一般情况下是用户运行时导致的)"></a>继承与RuntimeException的异常类(一般情况下是用户运行时导致的)</h3><h4 id="OutOfBoundsException"><a href="#OutOfBoundsException" class="headerlink" title="OutOfBoundsException"></a>OutOfBoundsException</h4><blockquote>
<p>如果值不是有效键，则抛出异常。这表示在编译时无法检测到的错误。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HandleApplication</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$params</span> = []</span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">isset</span>(<span class="variable">$params</span>[<span class="string">&#x27;secretCode&#x27;</span>])) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">OutOfBoundsException</span>(<span class="string">&#x27;Application hasn\&#x27;t sent secret code for authenticate&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> HandleApplication([]);</span><br></pre></td></tr></table></figure>

<h4 id="OverflowException"><a href="#OverflowException" class="headerlink" title="OverflowException"></a>OverflowException</h4><blockquote>
<p>将元素添加到完整容器中时引发异常。</p>
</blockquote>
<h4 id="RangeException-与-DomainException-对应"><a href="#RangeException-与-DomainException-对应" class="headerlink" title="RangeException 与 DomainException 对应"></a>RangeException 与 DomainException 对应</h4><blockquote>
<p>引发异常以指示程序执行期间的范围错误。通常，这意味着除下溢&#x2F;上溢外还存在算术错误。</p>
</blockquote>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">divide</span>(<span class="params"><span class="variable">$divident</span>, <span class="variable">$input</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$input</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">RangeException</span>(<span class="string">&quot;Divisor must not be zero&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$divident</span> / <span class="variable">$input</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="UnderflowException"><a href="#UnderflowException" class="headerlink" title="UnderflowException"></a>UnderflowException</h4><blockquote>
<p>对空容器执行无效操作（例如删除元素）时引发的异常。</p>
</blockquote>
<h4 id="UnexpectedValueException"><a href="#UnexpectedValueException" class="headerlink" title="UnexpectedValueException"></a>UnexpectedValueException</h4><blockquote>
<p>如果一个值与一组值不匹配，则抛出异常。通常，当一个函数调用另一个函数并期望返回值是某种类型或不包括与算术或缓冲区相关的错误的值时，就会发生这种情况。</p>
</blockquote>
<p>补充：<br>php脚本层优化<br>if</p>
<ul>
<li>if经常出现的条件放在最前面，省去其他不必要的判断</li>
<li>条件允许情况下，if多结合switch使用，效率高</li>
</ul>
<h3 id="Laravel-ORM使用"><a href="#Laravel-ORM使用" class="headerlink" title="Laravel ORM使用"></a>Laravel ORM使用</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#保存</span></span><br><span class="line"><span class="variable">$flight</span> = <span class="keyword">new</span> Flight;</span><br><span class="line"><span class="variable">$flight</span>-&gt;name = <span class="variable">$request</span>-&gt;name;</span><br><span class="line"><span class="variable">$flight</span>-&gt;save();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$flight</span> = App\Flight::find(<span class="number">1</span>);</span><br><span class="line"><span class="variable">$flight</span>-&gt;name = <span class="string">&#x27;New Flight Name&#x27;</span>;</span><br><span class="line"><span class="variable">$flight</span>-&gt;save(); <span class="comment">#更新</span></span><br><span class="line"><span class="variable">$flight</span>-&gt;delete(); <span class="comment">#删除</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#根据主键删除</span></span><br><span class="line">App\Flight::destroy(<span class="number">1</span>);</span><br><span class="line">App\Flight::destroy(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">App\Flight::destroy([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line">App\Flight::destroy(collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]));</span><br><span class="line"></span><br><span class="line"><span class="comment">#批量更新</span></span><br><span class="line">App\Flight::where(<span class="string">&#x27;active&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">          -&gt;where(<span class="string">&#x27;destination&#x27;</span>, <span class="string">&#x27;San Diego&#x27;</span>)</span><br><span class="line">          -&gt;update([<span class="string">&#x27;delayed&#x27;</span> =&gt; <span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">#查询所有数据</span></span><br><span class="line"><span class="variable">$flights</span> = App\Flight::all();</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$flights</span> <span class="keyword">as</span> <span class="variable">$flight</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$flight</span>-&gt;name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#查询符合规则的数据</span></span><br><span class="line"><span class="variable">$flights</span> = App\Flight::where(<span class="string">&#x27;active&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">               -&gt;orderBy(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;desc&#x27;</span>)</span><br><span class="line">               -&gt;take(<span class="number">10</span>)</span><br><span class="line">               -&gt;get();</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建数据之后返回模型</span></span><br><span class="line"><span class="variable">$user</span> = User::create([</span><br><span class="line">    <span class="string">&#x27;first_name&#x27;</span> =&gt; <span class="string">&#x27;Taylor&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;last_name&#x27;</span> =&gt; <span class="string">&#x27;Otwell&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;title&#x27;</span> =&gt; <span class="string">&#x27;Developer&#x27;</span>,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">#console命令行</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h2 id="查看配置文件"><a href="#查看配置文件" class="headerlink" title="查看配置文件"></a>查看配置文件</h2><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#查看php安装的扩展</span><br><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/php/</span>sbin/php -m 或 php -m | <span class="keyword">grep</span> zip</span><br><span class="line"></span><br><span class="line">#查看php.ini的存储位置</span><br><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/php/</span>sbin/php -i | <span class="keyword">grep</span> <span class="string">&#x27;php.ini&#x27;</span></span><br><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/php/</span>sbin/php-fpm -i | <span class="keyword">grep</span> <span class="string">&#x27;php.ini&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="安装-root权限"><a href="#安装-root权限" class="headerlink" title="安装(root权限)"></a>安装(root权限)</h2><blockquote>
<p><code>https://www.php.net/downloads.php</code></p>
</blockquote>
<h3 id="安装相关依赖包："><a href="#安装相关依赖包：" class="headerlink" title="安装相关依赖包："></a>安装相关依赖包：</h3><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">yum</span> <span class="comment">install</span> <span class="literal">-</span><span class="comment">y</span> <span class="comment">gcc</span> <span class="comment">curl</span> <span class="comment">libxml2</span> <span class="comment">libxml2</span><span class="literal">-</span><span class="comment">devel</span> <span class="comment">openssl</span> <span class="comment">openssl</span><span class="literal">-</span><span class="comment">devel</span> <span class="comment">bzip2</span> <span class="comment">bzip2</span><span class="literal">-</span><span class="comment">devel libcurl libcurl-devel libjpeg libjpeg</span><span class="literal">-</span><span class="comment">devel libpng libpng-devel freetype freetype</span><span class="literal">-</span><span class="comment">devel gmp gmp-devel libmcrypt libmcrypt</span><span class="literal">-</span><span class="comment">devel readline readline-devel libxslt libxslt</span><span class="literal">-</span><span class="comment">devel</span> <span class="comment">re2c</span></span><br></pre></td></tr></table></figure>

<h3 id="安装php"><a href="#安装php" class="headerlink" title="安装php"></a>安装php</h3><blockquote>
<p><code>http://hk2.php.net</code>是国内网站，mirror是压缩包，下载后解压获得所有php文件<br>备用链接<br><code>http://hk1.php.net/get/php-7.1.26.tar.gz/from/this/mirror</code><br><code>http://php.net/get/php-7.1.26.tar.gz/from/a/mirror</code></p>
</blockquote>
<h3 id="编译安装php"><a href="#编译安装php" class="headerlink" title="编译安装php"></a>编译安装php</h3><p>安装dg-jpeg扩展</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下载jpeg扩展包</span></span><br><span class="line">wget http:<span class="regexp">//</span>www.ijg.org<span class="regexp">/files/</span>jpegsrc.v8b.tar.gz </span><br><span class="line"><span class="comment">#解压缩扩展包</span></span><br><span class="line">tar -zxvf  jpegsrc.v8b.tar.gz </span><br><span class="line"><span class="comment">#安装</span></span><br><span class="line">cd jpeg-<span class="number">8</span>b</span><br><span class="line">.<span class="regexp">/configure --prefix=/u</span>sr<span class="regexp">/local/</span>php-kuozhan/jpeg --enable-shared --enable-static </span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/usr/</span>src/</span><br><span class="line">wget http:<span class="regexp">//</span>php.net<span class="regexp">/get/</span>php-<span class="number">7.2</span>.<span class="number">30</span>.tar.gz<span class="regexp">/from/</span>a/mirror</span><br><span class="line">tar -zxvf mirror</span><br></pre></td></tr></table></figure>

<p>–with-php-config&#x3D;&#x2F;usr&#x2F;local&#x2F;php&#x2F;bin&#x2F;php-config \ 指定版本号，暂时不适用</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">cd php-<span class="number">7.2</span>.<span class="number">30</span></span><br><span class="line">./configure <span class="string">\</span></span><br><span class="line">--prefix=/usr/local/php <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-config-file-path=/usr/local/php/etc <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-pear=DIR <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-tsrm-pthreads <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-pdo-mysql <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-mysqli <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-freetype-dir=/usr/include/freetype2 <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-openssl <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-curl <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-gettext <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-zlib=/usr <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-png-dir <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-freetype-dir <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-jpeg-dir <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-zlib-dir <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-gd <span class="string">\</span></span><br><span class="line">--enable-opcache <span class="string">\</span></span><br><span class="line">--enable-bcmath <span class="string">\</span></span><br><span class="line">--enable-mbstring <span class="string">\</span></span><br><span class="line">--enable-sockets <span class="string">\</span></span><br><span class="line">--enable-zip <span class="string">\</span></span><br><span class="line">--enable-fpm <span class="string">\</span></span><br><span class="line">--enable-xml <span class="string">\</span></span><br><span class="line">--enable-cli <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-jpeg-dir=/usr/local/php-kuozhan/jpeg</span><br><span class="line"></span><br><span class="line"><span class="comment">#暂时注释掉--with-apxs2=/usr/local/apache/bin/apxs \</span></span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure>

<h3 id="复制配置文件-php-ini"><a href="#复制配置文件-php-ini" class="headerlink" title="复制配置文件(php.ini)"></a>复制配置文件(php.ini)</h3><p>php配置文件的路径已经指定到&#x2F;usr&#x2F;local&#x2F;etc<br>只需要复制源码中的 <code>php.ini-development</code>或者 <code>php.ini-production</code>到usr&#x2F;local&#x2F;etc目录下即可，vi打开需要的扩展包</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cp <span class="regexp">/usr/</span>src<span class="regexp">/php-7.2.30/</span>php.ini-development <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>etc/php.ini &amp;&amp;</span><br><span class="line">cp <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>etc<span class="regexp">/php-fpm.conf.default /u</span>sr<span class="regexp">/local/</span>php<span class="regexp">/etc/</span>php-fpm.conf &amp;&amp;</span><br><span class="line">cp <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>etc<span class="regexp">/php-fpm.d/</span>www.conf.<span class="keyword">default</span> <span class="regexp">/usr/</span>local<span class="regexp">/php/</span>etc<span class="regexp">/php-fpm.d/</span>www.conf &amp;&amp;</span><br><span class="line">cp <span class="regexp">/usr/</span>src<span class="regexp">/php-7.2.30/</span>sapi<span class="regexp">/fpm/i</span>nit.d.php-fpm <span class="regexp">/etc/i</span>nit.d/php-fpm &amp;&amp;</span><br><span class="line">chmod +x <span class="regexp">/etc/i</span>nit.d/php-fpm &amp;&amp;</span><br><span class="line"><span class="regexp">/usr/</span>local<span class="regexp">/php/</span>sbin/php-fpm -t</span><br></pre></td></tr></table></figure>


<h3 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑文件</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#export前增加环境变量</span></span><br><span class="line">PATH=<span class="variable">$PATH</span><span class="symbol">:/usr/local/php/bin</span><span class="symbol">:/usr/local/php/sbin</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#重新载入profile</span></span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>


<h3 id="Pear设置"><a href="#Pear设置" class="headerlink" title="Pear设置"></a>Pear设置</h3><ol>
<li><code>pear config-set http_proxy &#39;http://127.0.0.1:10808&#39;</code> 设置pecl源，之后可以在 <code>/usr/local/src/php-XXXX/</code> 执行 <code>pear install xxx</code></li>
</ol>
<h2 id="安装扩展"><a href="#安装扩展" class="headerlink" title="安装扩展"></a>安装扩展</h2><h3 id="Reids"><a href="#Reids" class="headerlink" title="Reids"></a>Reids</h3><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/src/</span><br><span class="line">wget https://pecl.php.net/get/redis-5.2.0.tgz</span><br><span class="line">tar -zxvf redis-5.2.0.tgz</span><br><span class="line">cd redis-5.2.0</span><br><span class="line"></span><br><span class="line">/usr/local/php/bin/phpize</span><br><span class="line">./configure --with-php-config=/usr/local/php/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">vim /usr/local/php/etc/php.ini</span><br><span class="line">#shift + g 跳到最后一行</span><br><span class="line">[redis]</span><br><span class="line">extension=redis.so</span><br><span class="line"></span><br><span class="line">php -m</span><br></pre></td></tr></table></figure>
<h3 id="Zookeeper"><a href="#Zookeeper" class="headerlink" title="Zookeeper"></a>Zookeeper</h3><h2 id="安装Redis扩展"><a href="#安装Redis扩展" class="headerlink" title="安装Redis扩展"></a>安装Redis扩展</h2><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/src/</span><br><span class="line">wget https://pecl.php.net/get/zookeeper-0.6.4.tgz</span><br><span class="line">tar -zxvf zookeeper-0.6.4.tgz</span><br><span class="line">cd zookeeper-0.6.4</span><br><span class="line"></span><br><span class="line">/usr/local/php/bin/phpize</span><br><span class="line">./configure --with-php-config=/usr/local/php/bin/php-config  --with-libzookeeper-dir=/usr/local/zookeeper</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">vim /usr/local/php/etc/php.ini</span><br><span class="line">#shift + g 跳到最后一行</span><br><span class="line">[zookeeper]</span><br><span class="line">extension=zookeeper.so</span><br><span class="line"></span><br><span class="line">php -m</span><br></pre></td></tr></table></figure>
<h2 id="守护进程"><a href="#守护进程" class="headerlink" title="守护进程"></a>守护进程</h2><p>一般Server程序都是运行在系统后台，这与普通的交互式命令行程序有很大的区别。<code>glibc</code> 里有一个函数 <code>daemon</code> 。调用此函数，就可使当前进程脱离终端变成一个守护进程，具体内容参见 <code>man daemon</code>。PHP中暂时没有此函数，当然也可以写一个PHP的扩展函数来实现。</p>
<h3 id="PHP命令行程序实现守护进程化的方法"><a href="#PHP命令行程序实现守护进程化的方法" class="headerlink" title="PHP命令行程序实现守护进程化的方法"></a>PHP命令行程序实现守护进程化的方法</h3><ol>
<li><p>使用nohup</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup php myprog.php &gt; log.txt &amp;  <span class="comment">#这里就实现了守护进程化。</span></span><br></pre></td></tr></table></figure>
<ul>
<li>单独执行 php myprog.php，当按下ctrl+c时就会中断程序执行，会kill当前进程以及子进程。</li>
<li><code>php myprog.php &amp;</code> 这样执行程序虽然也是转为后台运行，实际上是依赖终端的，当用户退出终端时进程就会被杀掉。</li>
</ul>
</li>
<li><p>使用PHP代码来实现</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">daemonize</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="variable">$pid</span> = pcntl_fork();</span><br><span class="line">	<span class="keyword">if</span> (<span class="variable">$pid</span> == -<span class="number">1</span>) &#123;</span><br><span class="line">		<span class="keyword">die</span>(<span class="string">&quot;fork(1) failed!\n&quot;</span>);</span><br><span class="line">	&#125; <span class="keyword">elseif</span> (<span class="variable">$pid</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="comment">//让由用户启动的进程退出</span></span><br><span class="line">		<span class="keyword">exit</span>(<span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//建立一个有别于终端的新session以脱离终端</span></span><br><span class="line">	posix_setsid();</span><br><span class="line"></span><br><span class="line">	<span class="variable">$pid</span> = pcntl_fork();</span><br><span class="line">	<span class="keyword">if</span> (<span class="variable">$pid</span> == -<span class="number">1</span>) &#123;</span><br><span class="line">		<span class="keyword">die</span>(<span class="string">&quot;fork(2) failed!\n&quot;</span>);</span><br><span class="line">	&#125; <span class="keyword">elseif</span> (<span class="variable">$pid</span> &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="comment">//父进程退出, 剩下子进程成为最终的独立进程</span></span><br><span class="line">		<span class="keyword">exit</span>(<span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">daemonize();</span><br><span class="line">sleep(<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
<p> 用上面代码即可实现守护进程化，当你的PHP程序需要转为后台运行时，只需要调用一次封装好的函数daemonize()即可。</p>
<p> 注：这里没有实现标准输入输出的重定向。</p>
</li>
</ol>
<h2 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h2><p>安装wamp以及前置安装文件<br>[MSVBCRT](&#x2F;downloads&#x2F;MSVBCRT.AIO.2020.04.10.X86 X64.exe)<br><a href="/downloads/wampserver3.1.7_x64.exe">wamp</a></p>
<p>安装redis扩展<br><a href="/downloads/php_redis.dll">php_redis.dll</a></p>
<p>安装amqp以及rabbitmq扩展</p>
<ol>
<li>下载扩展包 <a href="/downloads/rabbitmq.4.dll">rabbitmq.4.dll</a> <a href="/downloads/php_amqp.dll">php_amqp.dll</a></li>
</ol>
<p>php.ini</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[redis]</span></span><br><span class="line"><span class="attr">extension</span>=php_redis.dll</span><br><span class="line"></span><br><span class="line"><span class="section">[amqp]</span></span><br><span class="line"><span class="attr">extension</span>=php_amqp.dll</span><br></pre></td></tr></table></figure>

<p>httpd.conf</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">LoadFile</span> <span class="string">&quot;C:/wamp64/bin/php/php7.2.14/ext/rabbitmq.4.dll&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="使用PHP开发游戏需要掌握什么技能？"><a href="#使用PHP开发游戏需要掌握什么技能？" class="headerlink" title="使用PHP开发游戏需要掌握什么技能？"></a>使用PHP开发游戏需要掌握什么技能？</h2><p>开发游戏使用 PHP 需要掌握一些基本的编程技能，包括熟悉 PHP 语言的语法和特性，了解常用的数据结构和算法，熟悉 HTML、CSS 和 JavaScript 等 Web 开发技术，并对游戏开发流程有一定的了解。<br>此外，开发游戏还需要具备一定的创造力和想象力，能够设计出有趣而富有挑战性的游戏内容。</p>
<h2 id="PHP-游戏开发流程"><a href="#PHP-游戏开发流程" class="headerlink" title="PHP 游戏开发流程"></a>PHP 游戏开发流程</h2><p>使用 PHP 开发游戏的具体流程可能会有所不同，但一般流程如下：</p>
<ol>
<li>设计游戏：首先需要设计出游戏的基本构成，包括游戏的背景、角色、道具、游戏规则等内容，并将其记录在游戏设计文档中。</li>
<li>编写游戏逻辑代码：根据游戏设计文档，使用 PHP 编写游戏的逻辑代码，包括游戏规则、角色控制、道具使用、游戏结束条件等。</li>
<li>开发用户界面：利用 HTML、CSS 和 JavaScript 等 Web 开发技术，开发游戏的用户界面，使游戏的界面美观易用。</li>
<li>测试游戏：进行游戏测试，检查游戏的功能和性能，并对发现的问题进行修改和优化。</li>
<li>发布游戏：将游戏发布到相应的平台，供用户下载和玩耍。</li>
</ol>
<h2 id="unity可以使用PHP进行游戏开发吗"><a href="#unity可以使用PHP进行游戏开发吗" class="headerlink" title="unity可以使用PHP进行游戏开发吗"></a>unity可以使用PHP进行游戏开发吗</h2><p>可以，但是，PHP 本身不是一种面向对象的语言，并不适合用来编写游戏的前端逻辑和图形渲染部分。如果你想在 Unity 中使用 PHP 进行游戏开发，你可以结合其他语言进行使用，比如 C#、JavaScript 等。</p>
<h2 id="如何设定手游FPS游戏的游戏规则？"><a href="#如何设定手游FPS游戏的游戏规则？" class="headerlink" title="如何设定手游FPS游戏的游戏规则？"></a>如何设定手游FPS游戏的游戏规则？</h2><p>手游FPS游戏（即手机上的射击游戏）通常会有一套特定的游戏规则，以确保游戏的公平性和可玩性。为了设定游戏规则，您需要考虑以下几点：</p>
<p>确定游戏的目标：手游FPS游戏的目标通常是击败其他玩家，可能包括杀死敌人、占领某个地点或某个物品等。<br>设定游戏的规则：游戏的规则包括如何移动、如何射击、如何使用道具等。这些规则应该简单易懂，但也要足够复杂，让玩家有充分的挑战性。<br>制定胜负条件：手游FPS游戏通常有一定的时间限制，或者有一定的得分要求。您需要确定游戏的胜负条件，并在游戏中适当地提醒玩家。<br>设定游戏难度：手游FPS游戏的难度应该适中，既能让玩家有足够的挑战，又能让他们在游戏中获得乐趣。总之，设定一款游戏的规则需要综合考虑多个因素，以便设计出一款有趣且富有挑战性的游戏。</p>
<h2 id="php游戏代码"><a href="#php游戏代码" class="headerlink" title="php游戏代码"></a>php游戏代码</h2><h3 id="游戏初始化"><a href="#游戏初始化" class="headerlink" title="游戏初始化"></a>游戏初始化</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 读取游戏配置</span></span><br><span class="line"><span class="variable">$config</span> = parse_ini_file(<span class="string">&#x27;game.ini&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化游戏引擎</span></span><br><span class="line"><span class="variable">$engine</span> = <span class="keyword">new</span> GameEngine(<span class="variable">$config</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化游戏世界</span></span><br><span class="line"><span class="variable">$world</span> = <span class="keyword">new</span> GameWorld(<span class="variable">$config</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加载游戏场景</span></span><br><span class="line"><span class="variable">$engine</span>-&gt;loadScene(<span class="variable">$world</span>-&gt;getScene());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化游戏玩家</span></span><br><span class="line"><span class="comment">// 创建新用户</span></span><br><span class="line"><span class="variable">$username</span> = <span class="string">&#x27;player1&#x27;</span>;</span><br><span class="line"><span class="variable">$user</span> = <span class="keyword">new</span> User(<span class="variable">$username</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化游戏玩家</span></span><br><span class="line"><span class="variable">$player</span> = <span class="keyword">new</span> Player(<span class="variable">$config</span>, <span class="variable">$user</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将玩家添加到游戏世界中</span></span><br><span class="line"><span class="variable">$world</span>-&gt;addPlayer(<span class="variable">$player</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 开始游戏</span></span><br><span class="line"><span class="variable">$engine</span>-&gt;run();</span><br></pre></td></tr></table></figure></div></article></div></main><footer><div class="paginator"><a href="/blog/p/c8447915/" class="prev">上一篇</a><a href="/blog/p/a28b9864/" class="next">下一篇</a></div><div id="disqus_thread"></div><script>var disqus_shortname = 'seansun';
var disqus_identifier = 'p/1417dc7c/';
var disqus_title = 'PHP';
var disqus_url = 'https://ayou129.github.io/blog/p/1417dc7c/';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//seansun.disqus.com/count.js" async></script><div class="copyright"><p>© 2015 - 2022 <a href="https://ayou129.github.io/blog">阿尤</a>.</p><!--p © #{year} #[a(href=config.url)!= config.author], powered by #[a(href=hexoURL, target="_blank") Hexo] and #[a(href=apolloURL, target="_blank") hexo-theme-apollo].--></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>